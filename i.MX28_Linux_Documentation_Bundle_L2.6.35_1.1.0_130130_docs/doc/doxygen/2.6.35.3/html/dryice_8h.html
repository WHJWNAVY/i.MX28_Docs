<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>MXC Linux BSP: linux/drivers/mxc/security/dryice.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="contents">
<h1>linux/drivers/mxc/security/dryice.h File Reference</h1>Definition of DryIce API.  
<a href="#_details">More...</a>
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dryice_8h.html#2f112f21d44d94a1961bb8daea6e4e02">SCC_KEY_LEN</a>&nbsp;&nbsp;&nbsp;168</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dryice_8h.html#d91bfaf106e42aa552f1605c5b8a9ef2">MAX_KEY_LEN</a>&nbsp;&nbsp;&nbsp;256</td></tr>

<tr><td colspan="2"><div class="groupHeader">DryIce Function Flags</div></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dryice_8h.html#efab3d59bb37ab2388b0b4f0a6c88782">DI_FUNC_FLAG_ASYNC</a>&nbsp;&nbsp;&nbsp;0x01</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dryice_8h.html#2efc92dfc5c4f7e83bf45a49f2674186">DI_FUNC_FLAG_READ_LOCK</a>&nbsp;&nbsp;&nbsp;0x02</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dryice_8h.html#4c3c6234cc3c89571740ec969e17553e">DI_FUNC_FLAG_WRITE_LOCK</a>&nbsp;&nbsp;&nbsp;0x04</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dryice_8h.html#9745a2ecf549042d4d7f8f56d7928c76">DI_FUNC_FLAG_HARD_LOCK</a>&nbsp;&nbsp;&nbsp;0x08</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dryice_8h.html#99be36fe78f36a8a934dc70621a8c7c3">DI_FUNC_FLAG_WORD_KEY</a>&nbsp;&nbsp;&nbsp;0x10</td></tr>

<tr><td colspan="2"><div class="groupHeader">DryIce Tamper Events</div></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dryice_8h.html#8bff62edb03eef77c4e57a3a72deee6e">DI_TAMPER_EVENT_WTD</a>&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 23)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dryice_8h.html#0b1e71ec02376ed221921426c5b964a8">DI_TAMPER_EVENT_ETBD</a>&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 22)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dryice_8h.html#e89aaff261a300839849dd58b5ded5d8">DI_TAMPER_EVENT_ETAD</a>&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 21)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dryice_8h.html#c091263165cf5796184f703ea981c80a">DI_TAMPER_EVENT_EBD</a>&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 20)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dryice_8h.html#2247972a7491179a975a3bf5eae4ba1a">DI_TAMPER_EVENT_SAD</a>&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 19)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dryice_8h.html#2570d57ff78985f3bc99b58c2b68ac1f">DI_TAMPER_EVENT_TTD</a>&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 18)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dryice_8h.html#840e3cd201866d6ca60bc608bf56711d">DI_TAMPER_EVENT_CTD</a>&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 17)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dryice_8h.html#478e6fd49e3c113747e21bbd8ddbcddf">DI_TAMPER_EVENT_VTD</a>&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 16)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dryice_8h.html#73ab95df8821227f97eb6a1a3e38cd34">DI_TAMPER_EVENT_MCO</a>&nbsp;&nbsp;&nbsp;(1 &lt;&lt;  3)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dryice_8h.html#1c537f76935c71cf7cc6850255caa1cf">DI_TAMPER_EVENT_TCO</a>&nbsp;&nbsp;&nbsp;(1 &lt;&lt;  2)</td></tr>

<tr><td colspan="2"><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef enum <a class="el" href="dryice_8h.html#b7bbdea6da8023338b6b821b2a5c2531">di_key</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dryice_8h.html#c21eb81acf0f4d625f9c805a69eff9fe">di_key_t</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef enum <a class="el" href="dryice_8h.html#3054cca3fa450afe99ad27f9829580fa">dryice_return</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dryice_8h.html#840558ca16a3df22ac79602be475f5b9">di_return_t</a></td></tr>

<tr><td colspan="2"><br><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dryice_8h.html#b7bbdea6da8023338b6b821b2a5c2531">di_key</a> { <br>
&nbsp;&nbsp;<a class="el" href="dryice_8h.html#b7bbdea6da8023338b6b821b2a5c2531a306386ce6b034ca23460bc97c0d2cf7">DI_KEY_FK</a>, 
<br>
&nbsp;&nbsp;<a class="el" href="dryice_8h.html#b7bbdea6da8023338b6b821b2a5c2531314316180ca00dc824da64db2d724962">DI_KEY_PK</a>, 
<br>
&nbsp;&nbsp;<a class="el" href="dryice_8h.html#b7bbdea6da8023338b6b821b2a5c2531391520b287a323ad05e0b17df8cbb44e">DI_KEY_RK</a>, 
<br>
&nbsp;&nbsp;<a class="el" href="dryice_8h.html#b7bbdea6da8023338b6b821b2a5c2531eb98bac0386f3360c38173097c8aa900">DI_KEY_FPK</a>, 
<br>
&nbsp;&nbsp;<a class="el" href="dryice_8h.html#b7bbdea6da8023338b6b821b2a5c25315ccc03b2d42f416b72de41f6314af96c">DI_KEY_FRK</a>
<br>
 }</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dryice_8h.html#3054cca3fa450afe99ad27f9829580fa">dryice_return</a> { <br>
&nbsp;&nbsp;<a class="el" href="dryice_8h.html#3054cca3fa450afe99ad27f9829580fa064fa122f4d4a602c60562b1bd0898dc">DI_SUCCESS</a> =  0, 
<br>
&nbsp;&nbsp;<a class="el" href="dryice_8h.html#3054cca3fa450afe99ad27f9829580fa0edd162980f562aad7607e2b169a7ff6">DI_ERR_BUSY</a>, 
<br>
&nbsp;&nbsp;<a class="el" href="dryice_8h.html#3054cca3fa450afe99ad27f9829580facfbd931bb443fb224f8ecd9ab0537f5c">DI_ERR_STATE</a>, 
<br>
&nbsp;&nbsp;<a class="el" href="dryice_8h.html#3054cca3fa450afe99ad27f9829580fad949520cce522d8674ef1c226dfb7eb0">DI_ERR_INUSE</a>, 
<br>
&nbsp;&nbsp;<a class="el" href="dryice_8h.html#3054cca3fa450afe99ad27f9829580fa81ae4af08b1dabe910fa381e229f9a8a">DI_ERR_UNSET</a>, 
<br>
&nbsp;&nbsp;<a class="el" href="dryice_8h.html#3054cca3fa450afe99ad27f9829580fa1e08eefe6241948a27b7d2f799fbba41">DI_ERR_WRITE</a>, 
<br>
&nbsp;&nbsp;<a class="el" href="dryice_8h.html#3054cca3fa450afe99ad27f9829580fa16306d164b5528b553629d1e9f2c1c94">DI_ERR_INVAL</a>, 
<br>
&nbsp;&nbsp;<a class="el" href="dryice_8h.html#3054cca3fa450afe99ad27f9829580fab41a096b6ed78a08b041580dd96f1283">DI_ERR_FAIL</a>, 
<br>
&nbsp;&nbsp;<a class="el" href="dryice_8h.html#3054cca3fa450afe99ad27f9829580fab4586e426eb0d437cc40334171f39759">DI_ERR_HLOCK</a>, 
<br>
&nbsp;&nbsp;<a class="el" href="dryice_8h.html#3054cca3fa450afe99ad27f9829580fa64812265c822aa503f243f4623265967">DI_ERR_SLOCK</a>, 
<br>
&nbsp;&nbsp;<a class="el" href="dryice_8h.html#3054cca3fa450afe99ad27f9829580faf59502073a8ff9b673de6a7c9e9ec8f5">DI_ERR_NOMEM</a>
<br>
 }</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="dryice_8h.html#840558ca16a3df22ac79602be475f5b9">di_return_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dryice_8h.html#e278a8777c932e2e76653b978d85bf6d">dryice_set_programmed_key</a> (const void *key_data, int key_bits, int flags)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="dryice_8h.html#840558ca16a3df22ac79602be475f5b9">di_return_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dryice_8h.html#0a02afff39398d8e76c906fadcc3c0b9">dryice_get_programmed_key</a> (uint8_t *key_data, int key_bits)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="dryice_8h.html#840558ca16a3df22ac79602be475f5b9">di_return_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dryice_8h.html#67de03e19e46378a7a2110d08c94db77">dryice_release_programmed_key</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="dryice_8h.html#840558ca16a3df22ac79602be475f5b9">di_return_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dryice_8h.html#3dbd81039ec6ba8d9259e1fc2c997c4b">dryice_set_random_key</a> (int flags)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="dryice_8h.html#840558ca16a3df22ac79602be475f5b9">di_return_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dryice_8h.html#d2ab024a0a0f43d6ec622254a2a5c0b9">dryice_select_key</a> (<a class="el" href="dryice_8h.html#c21eb81acf0f4d625f9c805a69eff9fe">di_key_t</a> key, int flags)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="dryice_8h.html#840558ca16a3df22ac79602be475f5b9">di_return_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dryice_8h.html#3a1a338fb6646b0b7defdb1f07783656">dryice_check_key</a> (<a class="el" href="dryice_8h.html#c21eb81acf0f4d625f9c805a69eff9fe">di_key_t</a> *key)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="dryice_8h.html#840558ca16a3df22ac79602be475f5b9">di_return_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dryice_8h.html#89fff523d0ace3e8bcbd3f6c298c90de">dryice_release_key_selection</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="dryice_8h.html#840558ca16a3df22ac79602be475f5b9">di_return_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dryice_8h.html#b790e25315df9dfc30360cf4bbf29c35">dryice_get_tamper_event</a> (uint32_t *events, uint32_t *timestamp, int flags)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="dryice_8h.html#840558ca16a3df22ac79602be475f5b9">di_return_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dryice_8h.html#1a81444f08fd1af294a7c3bfcbbf4936">dryice_register_callback</a> (void(*func)(<a class="el" href="dryice_8h.html#840558ca16a3df22ac79602be475f5b9">di_return_t</a> rc, unsigned long cookie), unsigned long cookie)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Definition of DryIce API. 
<p>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="efab3d59bb37ab2388b0b4f0a6c88782"></a><!-- doxytag: member="dryice.h::DI_FUNC_FLAG_ASYNC" ref="efab3d59bb37ab2388b0b4f0a6c88782" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DI_FUNC_FLAG_ASYNC&nbsp;&nbsp;&nbsp;0x01          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
do not block 
<p>Referenced by <a class="el" href="kernel_22_86_835_83_2linux_2drivers_2mxc_2security_2dryice_8c-source.html#l00925">dryice_select_key()</a>, <a class="el" href="kernel_22_86_835_83_2linux_2drivers_2mxc_2security_2dryice_8c-source.html#l00681">dryice_set_programmed_key()</a>, and <a class="el" href="kernel_22_86_835_83_2linux_2drivers_2mxc_2security_2dryice_8c-source.html#l00870">dryice_set_random_key()</a>.</p>

</div>
</div><p>
<a class="anchor" name="9745a2ecf549042d4d7f8f56d7928c76"></a><!-- doxytag: member="dryice.h::DI_FUNC_FLAG_HARD_LOCK" ref="9745a2ecf549042d4d7f8f56d7928c76" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DI_FUNC_FLAG_HARD_LOCK&nbsp;&nbsp;&nbsp;0x08          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
locks will be hard (default soft) 
<p>Referenced by <a class="el" href="kernel_22_86_835_83_2linux_2drivers_2mxc_2security_2dryice_8c-source.html#l00925">dryice_select_key()</a>, <a class="el" href="kernel_22_86_835_83_2linux_2drivers_2mxc_2security_2dryice_8c-source.html#l00681">dryice_set_programmed_key()</a>, and <a class="el" href="kernel_22_86_835_83_2linux_2drivers_2mxc_2security_2dryice_8c-source.html#l00870">dryice_set_random_key()</a>.</p>

</div>
</div><p>
<a class="anchor" name="2efc92dfc5c4f7e83bf45a49f2674186"></a><!-- doxytag: member="dryice.h::DI_FUNC_FLAG_READ_LOCK" ref="2efc92dfc5c4f7e83bf45a49f2674186" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DI_FUNC_FLAG_READ_LOCK&nbsp;&nbsp;&nbsp;0x02          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
set read lock for this resource 
<p>Referenced by <a class="el" href="kernel_22_86_835_83_2linux_2drivers_2mxc_2security_2dryice_8c-source.html#l00681">dryice_set_programmed_key()</a>.</p>

</div>
</div><p>
<a class="anchor" name="99be36fe78f36a8a934dc70621a8c7c3"></a><!-- doxytag: member="dryice.h::DI_FUNC_FLAG_WORD_KEY" ref="99be36fe78f36a8a934dc70621a8c7c3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DI_FUNC_FLAG_WORD_KEY&nbsp;&nbsp;&nbsp;0x10          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
key provided as 32-bit words 
<p>Referenced by <a class="el" href="kernel_22_86_835_83_2linux_2drivers_2mxc_2security_2dryice_8c-source.html#l00681">dryice_set_programmed_key()</a>.</p>

</div>
</div><p>
<a class="anchor" name="4c3c6234cc3c89571740ec969e17553e"></a><!-- doxytag: member="dryice.h::DI_FUNC_FLAG_WRITE_LOCK" ref="4c3c6234cc3c89571740ec969e17553e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DI_FUNC_FLAG_WRITE_LOCK&nbsp;&nbsp;&nbsp;0x04          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
set write lock for resource 
<p>Referenced by <a class="el" href="kernel_22_86_835_83_2linux_2drivers_2mxc_2security_2dryice_8c-source.html#l00925">dryice_select_key()</a>, <a class="el" href="kernel_22_86_835_83_2linux_2drivers_2mxc_2security_2dryice_8c-source.html#l00681">dryice_set_programmed_key()</a>, and <a class="el" href="kernel_22_86_835_83_2linux_2drivers_2mxc_2security_2dryice_8c-source.html#l00870">dryice_set_random_key()</a>.</p>

</div>
</div><p>
<a class="anchor" name="840e3cd201866d6ca60bc608bf56711d"></a><!-- doxytag: member="dryice.h::DI_TAMPER_EVENT_CTD" ref="840e3cd201866d6ca60bc608bf56711d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DI_TAMPER_EVENT_CTD&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 17)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
clock tampering det 
</div>
</div><p>
<a class="anchor" name="c091263165cf5796184f703ea981c80a"></a><!-- doxytag: member="dryice.h::DI_TAMPER_EVENT_EBD" ref="c091263165cf5796184f703ea981c80a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DI_TAMPER_EVENT_EBD&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 20)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
external boot detected 
</div>
</div><p>
<a class="anchor" name="e89aaff261a300839849dd58b5ded5d8"></a><!-- doxytag: member="dryice.h::DI_TAMPER_EVENT_ETAD" ref="e89aaff261a300839849dd58b5ded5d8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DI_TAMPER_EVENT_ETAD&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 21)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
ext tampering det: input A 
</div>
</div><p>
<a class="anchor" name="0b1e71ec02376ed221921426c5b964a8"></a><!-- doxytag: member="dryice.h::DI_TAMPER_EVENT_ETBD" ref="0b1e71ec02376ed221921426c5b964a8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DI_TAMPER_EVENT_ETBD&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 22)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
ext tampering det: input B 
</div>
</div><p>
<a class="anchor" name="73ab95df8821227f97eb6a1a3e38cd34"></a><!-- doxytag: member="dryice.h::DI_TAMPER_EVENT_MCO" ref="73ab95df8821227f97eb6a1a3e38cd34" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DI_TAMPER_EVENT_MCO&nbsp;&nbsp;&nbsp;(1 &lt;&lt;  3)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
monotonic counter overflow 
</div>
</div><p>
<a class="anchor" name="2247972a7491179a975a3bf5eae4ba1a"></a><!-- doxytag: member="dryice.h::DI_TAMPER_EVENT_SAD" ref="2247972a7491179a975a3bf5eae4ba1a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DI_TAMPER_EVENT_SAD&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 19)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
security alarm detected 
</div>
</div><p>
<a class="anchor" name="1c537f76935c71cf7cc6850255caa1cf"></a><!-- doxytag: member="dryice.h::DI_TAMPER_EVENT_TCO" ref="1c537f76935c71cf7cc6850255caa1cf" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DI_TAMPER_EVENT_TCO&nbsp;&nbsp;&nbsp;(1 &lt;&lt;  2)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
time counter overflow 
</div>
</div><p>
<a class="anchor" name="2570d57ff78985f3bc99b58c2b68ac1f"></a><!-- doxytag: member="dryice.h::DI_TAMPER_EVENT_TTD" ref="2570d57ff78985f3bc99b58c2b68ac1f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DI_TAMPER_EVENT_TTD&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 18)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
temperature tampering det 
</div>
</div><p>
<a class="anchor" name="478e6fd49e3c113747e21bbd8ddbcddf"></a><!-- doxytag: member="dryice.h::DI_TAMPER_EVENT_VTD" ref="478e6fd49e3c113747e21bbd8ddbcddf" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DI_TAMPER_EVENT_VTD&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 16)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
voltage tampering det 
</div>
</div><p>
<a class="anchor" name="8bff62edb03eef77c4e57a3a72deee6e"></a><!-- doxytag: member="dryice.h::DI_TAMPER_EVENT_WTD" ref="8bff62edb03eef77c4e57a3a72deee6e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DI_TAMPER_EVENT_WTD&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 23)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
wire-mesh tampering det 
</div>
</div><p>
<a class="anchor" name="d91bfaf106e42aa552f1605c5b8a9ef2"></a><!-- doxytag: member="dryice.h::MAX_KEY_LEN" ref="d91bfaf106e42aa552f1605c5b8a9ef2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_KEY_LEN&nbsp;&nbsp;&nbsp;256          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This defines the maximum key length (in bits) 
<p>Referenced by <a class="el" href="kernel_22_86_835_83_2linux_2drivers_2mxc_2security_2dryice_8c-source.html#l00783">dryice_get_programmed_key()</a>, and <a class="el" href="kernel_22_86_835_83_2linux_2drivers_2mxc_2security_2dryice_8c-source.html#l00681">dryice_set_programmed_key()</a>.</p>

</div>
</div><p>
<a class="anchor" name="2f112f21d44d94a1961bb8daea6e4e02"></a><!-- doxytag: member="dryice.h::SCC_KEY_LEN" ref="2f112f21d44d94a1961bb8daea6e4e02" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SCC_KEY_LEN&nbsp;&nbsp;&nbsp;168          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This defines the SCC key length (in bits) 
</div>
</div><p>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="c21eb81acf0f4d625f9c805a69eff9fe"></a><!-- doxytag: member="dryice.h::di_key_t" ref="c21eb81acf0f4d625f9c805a69eff9fe" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef enum <a class="el" href="dryice_8h.html#b7bbdea6da8023338b6b821b2a5c2531">di_key</a>  <a class="el" href="dryice_8h.html#c21eb81acf0f4d625f9c805a69eff9fe">di_key_t</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
DryIce Key Sources 
</div>
</div><p>
<a class="anchor" name="840558ca16a3df22ac79602be475f5b9"></a><!-- doxytag: member="dryice.h::di_return_t" ref="840558ca16a3df22ac79602be475f5b9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef enum <a class="el" href="dryice_8h.html#3054cca3fa450afe99ad27f9829580fa">dryice_return</a>  <a class="el" href="dryice_8h.html#840558ca16a3df22ac79602be475f5b9">di_return_t</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
DryIce Error Codes 
</div>
</div><p>
<hr><h2>Enumeration Type Documentation</h2>
<a class="anchor" name="b7bbdea6da8023338b6b821b2a5c2531"></a><!-- doxytag: member="dryice.h::di_key" ref="b7bbdea6da8023338b6b821b2a5c2531" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="dryice_8h.html#b7bbdea6da8023338b6b821b2a5c2531">di_key</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
DryIce Key Sources <dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="b7bbdea6da8023338b6b821b2a5c2531a306386ce6b034ca23460bc97c0d2cf7"></a><!-- doxytag: member="DI_KEY_FK" ref="b7bbdea6da8023338b6b821b2a5c2531a306386ce6b034ca23460bc97c0d2cf7" args="" -->DI_KEY_FK</em>&nbsp;</td><td>
the fused (IIM) key </td></tr>
<tr><td valign="top"><em><a class="anchor" name="b7bbdea6da8023338b6b821b2a5c2531314316180ca00dc824da64db2d724962"></a><!-- doxytag: member="DI_KEY_PK" ref="b7bbdea6da8023338b6b821b2a5c2531314316180ca00dc824da64db2d724962" args="" -->DI_KEY_PK</em>&nbsp;</td><td>
the programmed key </td></tr>
<tr><td valign="top"><em><a class="anchor" name="b7bbdea6da8023338b6b821b2a5c2531391520b287a323ad05e0b17df8cbb44e"></a><!-- doxytag: member="DI_KEY_RK" ref="b7bbdea6da8023338b6b821b2a5c2531391520b287a323ad05e0b17df8cbb44e" args="" -->DI_KEY_RK</em>&nbsp;</td><td>
the random key </td></tr>
<tr><td valign="top"><em><a class="anchor" name="b7bbdea6da8023338b6b821b2a5c2531eb98bac0386f3360c38173097c8aa900"></a><!-- doxytag: member="DI_KEY_FPK" ref="b7bbdea6da8023338b6b821b2a5c2531eb98bac0386f3360c38173097c8aa900" args="" -->DI_KEY_FPK</em>&nbsp;</td><td>
the programmed key XORed with the fused key </td></tr>
<tr><td valign="top"><em><a class="anchor" name="b7bbdea6da8023338b6b821b2a5c25315ccc03b2d42f416b72de41f6314af96c"></a><!-- doxytag: member="DI_KEY_FRK" ref="b7bbdea6da8023338b6b821b2a5c25315ccc03b2d42f416b72de41f6314af96c" args="" -->DI_KEY_FRK</em>&nbsp;</td><td>
the random key XORed with the fused key </td></tr>
</table>
</dl>

</div>
</div><p>
<a class="anchor" name="3054cca3fa450afe99ad27f9829580fa"></a><!-- doxytag: member="dryice.h::dryice_return" ref="3054cca3fa450afe99ad27f9829580fa" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="dryice_8h.html#3054cca3fa450afe99ad27f9829580fa">dryice_return</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
DryIce Error Codes <dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="3054cca3fa450afe99ad27f9829580fa064fa122f4d4a602c60562b1bd0898dc"></a><!-- doxytag: member="DI_SUCCESS" ref="3054cca3fa450afe99ad27f9829580fa064fa122f4d4a602c60562b1bd0898dc" args="" -->DI_SUCCESS</em>&nbsp;</td><td>
operation was successful </td></tr>
<tr><td valign="top"><em><a class="anchor" name="3054cca3fa450afe99ad27f9829580fa0edd162980f562aad7607e2b169a7ff6"></a><!-- doxytag: member="DI_ERR_BUSY" ref="3054cca3fa450afe99ad27f9829580fa0edd162980f562aad7607e2b169a7ff6" args="" -->DI_ERR_BUSY</em>&nbsp;</td><td>
device or resource busy </td></tr>
<tr><td valign="top"><em><a class="anchor" name="3054cca3fa450afe99ad27f9829580facfbd931bb443fb224f8ecd9ab0537f5c"></a><!-- doxytag: member="DI_ERR_STATE" ref="3054cca3fa450afe99ad27f9829580facfbd931bb443fb224f8ecd9ab0537f5c" args="" -->DI_ERR_STATE</em>&nbsp;</td><td>
dryice is in incompatible state </td></tr>
<tr><td valign="top"><em><a class="anchor" name="3054cca3fa450afe99ad27f9829580fad949520cce522d8674ef1c226dfb7eb0"></a><!-- doxytag: member="DI_ERR_INUSE" ref="3054cca3fa450afe99ad27f9829580fad949520cce522d8674ef1c226dfb7eb0" args="" -->DI_ERR_INUSE</em>&nbsp;</td><td>
resource is already in use </td></tr>
<tr><td valign="top"><em><a class="anchor" name="3054cca3fa450afe99ad27f9829580fa81ae4af08b1dabe910fa381e229f9a8a"></a><!-- doxytag: member="DI_ERR_UNSET" ref="3054cca3fa450afe99ad27f9829580fa81ae4af08b1dabe910fa381e229f9a8a" args="" -->DI_ERR_UNSET</em>&nbsp;</td><td>
resource has not been initialized </td></tr>
<tr><td valign="top"><em><a class="anchor" name="3054cca3fa450afe99ad27f9829580fa1e08eefe6241948a27b7d2f799fbba41"></a><!-- doxytag: member="DI_ERR_WRITE" ref="3054cca3fa450afe99ad27f9829580fa1e08eefe6241948a27b7d2f799fbba41" args="" -->DI_ERR_WRITE</em>&nbsp;</td><td>
error occurred during register write </td></tr>
<tr><td valign="top"><em><a class="anchor" name="3054cca3fa450afe99ad27f9829580fa16306d164b5528b553629d1e9f2c1c94"></a><!-- doxytag: member="DI_ERR_INVAL" ref="3054cca3fa450afe99ad27f9829580fa16306d164b5528b553629d1e9f2c1c94" args="" -->DI_ERR_INVAL</em>&nbsp;</td><td>
invalid argument </td></tr>
<tr><td valign="top"><em><a class="anchor" name="3054cca3fa450afe99ad27f9829580fab41a096b6ed78a08b041580dd96f1283"></a><!-- doxytag: member="DI_ERR_FAIL" ref="3054cca3fa450afe99ad27f9829580fab41a096b6ed78a08b041580dd96f1283" args="" -->DI_ERR_FAIL</em>&nbsp;</td><td>
operation failed </td></tr>
<tr><td valign="top"><em><a class="anchor" name="3054cca3fa450afe99ad27f9829580fab4586e426eb0d437cc40334171f39759"></a><!-- doxytag: member="DI_ERR_HLOCK" ref="3054cca3fa450afe99ad27f9829580fab4586e426eb0d437cc40334171f39759" args="" -->DI_ERR_HLOCK</em>&nbsp;</td><td>
resource is hard locked </td></tr>
<tr><td valign="top"><em><a class="anchor" name="3054cca3fa450afe99ad27f9829580fa64812265c822aa503f243f4623265967"></a><!-- doxytag: member="DI_ERR_SLOCK" ref="3054cca3fa450afe99ad27f9829580fa64812265c822aa503f243f4623265967" args="" -->DI_ERR_SLOCK</em>&nbsp;</td><td>
resource is soft locked </td></tr>
<tr><td valign="top"><em><a class="anchor" name="3054cca3fa450afe99ad27f9829580faf59502073a8ff9b673de6a7c9e9ec8f5"></a><!-- doxytag: member="DI_ERR_NOMEM" ref="3054cca3fa450afe99ad27f9829580faf59502073a8ff9b673de6a7c9e9ec8f5" args="" -->DI_ERR_NOMEM</em>&nbsp;</td><td>
out of memory </td></tr>
</table>
</dl>

</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="3a1a338fb6646b0b7defdb1f07783656"></a><!-- doxytag: member="dryice.h::dryice_check_key" ref="3a1a338fb6646b0b7defdb1f07783656" args="(di_key_t *key)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="dryice_8h.html#840558ca16a3df22ac79602be475f5b9">di_return_t</a> dryice_check_key           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="dryice_8h.html#c21eb81acf0f4d625f9c805a69eff9fe">di_key_t</a> *&nbsp;</td>
          <td class="paramname"> <em>key</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Check which key will be used in the SCC. This is needed because in some DryIce states, the Key Select Register is overridden by a default value (the Fused/IIM key).<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>key</em>&nbsp;</td><td>The source of the key that is currently selected for use by the SCC. This may be different from the key specified by the dryice_select_key function (See <a class="el" href="dryice_8h.html#c21eb81acf0f4d625f9c805a69eff9fe">di_key_t</a>). This value is set even if an error code (except for BUSY) is returned.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Returns SUCCESS (0), BUSY if DryIce is busy, STATE if DryIce is in the wrong state, INVAL on invalid arguments, or UNSET if no key has been selected (See <a class="el" href="dryice_8h.html#840558ca16a3df22ac79602be475f5b9">di_return_t</a>). </dd></dl>

<p>References <a class="el" href="dryice_8h-source.html#l00090">DI_ERR_BUSY</a>, <a class="el" href="dryice_8h-source.html#l00095">DI_ERR_INVAL</a>, <a class="el" href="dryice_8h-source.html#l00091">DI_ERR_STATE</a>, <a class="el" href="dryice_8h-source.html#l00093">DI_ERR_UNSET</a>, <a class="el" href="dryice_8h-source.html#l00078">DI_KEY_FK</a>, <a class="el" href="dryice_8h-source.html#l00081">DI_KEY_FPK</a>, <a class="el" href="dryice_8h-source.html#l00082">DI_KEY_FRK</a>, <a class="el" href="dryice_8h-source.html#l00079">DI_KEY_PK</a>, and <a class="el" href="dryice_8h-source.html#l00080">DI_KEY_RK</a>.</p>

</div>
</div><p>
<a class="anchor" name="0a02afff39398d8e76c906fadcc3c0b9"></a><!-- doxytag: member="dryice.h::dryice_get_programmed_key" ref="0a02afff39398d8e76c906fadcc3c0b9" args="(uint8_t *key_data, int key_bits)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="dryice_8h.html#840558ca16a3df22ac79602be475f5b9">di_return_t</a> dryice_get_programmed_key           </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&nbsp;</td>
          <td class="paramname"> <em>key_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>key_bits</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read the Programmed Key registers and write the contents into a buffer.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>key_data</em>&nbsp;</td><td>A byte pointer to where the key data will be written, with the most significant byte being written first.</td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>key_bits</em>&nbsp;</td><td>The number of bits of the key to be retrieved. This must be a multiple of 8 and within the range of 0 and MAX_KEY_LEN.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Returns SUCCESS (0), BUSY if DryIce is busy, INVAL on invalid arguments, UNSET if key has not been programmed, STATE if DryIce is in the wrong state, and HLOCK or SLOCK if the key registers are locked for reading (See <a class="el" href="dryice_8h.html#840558ca16a3df22ac79602be475f5b9">di_return_t</a>). </dd></dl>

<p>References <a class="el" href="dryice_8h-source.html#l00090">DI_ERR_BUSY</a>, <a class="el" href="dryice_8h-source.html#l00097">DI_ERR_HLOCK</a>, <a class="el" href="dryice_8h-source.html#l00095">DI_ERR_INVAL</a>, <a class="el" href="dryice_8h-source.html#l00098">DI_ERR_SLOCK</a>, <a class="el" href="dryice_8h-source.html#l00091">DI_ERR_STATE</a>, <a class="el" href="dryice_8h-source.html#l00093">DI_ERR_UNSET</a>, and <a class="el" href="dryice_8h-source.html#l00043">MAX_KEY_LEN</a>.</p>

</div>
</div><p>
<a class="anchor" name="b790e25315df9dfc30360cf4bbf29c35"></a><!-- doxytag: member="dryice.h::dryice_get_tamper_event" ref="b790e25315df9dfc30360cf4bbf29c35" args="(uint32_t *events, uint32_t *timestamp, int flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="dryice_8h.html#840558ca16a3df22ac79602be475f5b9">di_return_t</a> dryice_get_tamper_event           </td>
          <td>(</td>
          <td class="paramtype">uint32_t *&nbsp;</td>
          <td class="paramname"> <em>events</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&nbsp;</td>
          <td class="paramname"> <em>timestamp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>flags</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns tamper-detection status bits. Also an optional timestamp when DryIce is in the Non-valid state. If DryIce is not in Failure or Non-valid state, this interface returns a failure code.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>events</em>&nbsp;</td><td>This is a bit-wise OR of the following events: WTD (Wire Mesh), ETBD (External Tamper B), ETAD (External Tamper A), EBD (External Boot), SAD (Security Alarm), TTD (Temperature Tamper), CTD (Clock Tamper), VTD (Voltage Tamper), MCO (Monolithic Counter Overflow), and TCO (Time Counter Overflow).</td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>timestamp</em>&nbsp;</td><td>This is the value of the time counter in seconds when the tamper occurred. A timestamp will not be returned if a NULL pointer is specified. If DryIce is not in the Non-valid state the time cannot be read, so a timestamp of 0 will be returned.</td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>flags</em>&nbsp;</td><td>This is a bit-wise OR of the flags to be passed to the function. Flags is ignored currently by this function.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Returns SUCCESS (0), BUSY if DryIce is busy, and INVAL on invalid arguments (See <a class="el" href="dryice_8h.html#840558ca16a3df22ac79602be475f5b9">di_return_t</a>). </dd></dl>

<p>References <a class="el" href="dryice_8h-source.html#l00090">DI_ERR_BUSY</a>, <a class="el" href="dryice_8h-source.html#l00095">DI_ERR_INVAL</a>, and <a class="el" href="dryice_8h-source.html#l00091">DI_ERR_STATE</a>.</p>

</div>
</div><p>
<a class="anchor" name="1a81444f08fd1af294a7c3bfcbbf4936"></a><!-- doxytag: member="dryice.h::dryice_register_callback" ref="1a81444f08fd1af294a7c3bfcbbf4936" args="(void(*func)(di_return_t rc, unsigned long cookie), unsigned long cookie)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="dryice_8h.html#840558ca16a3df22ac79602be475f5b9">di_return_t</a> dryice_register_callback           </td>
          <td>(</td>
          <td class="paramtype">void(*)(<a class="el" href="dryice_8h.html#840558ca16a3df22ac79602be475f5b9">di_return_t</a> rc, unsigned long cookie)&nbsp;</td>
          <td class="paramname"> <em>func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&nbsp;</td>
          <td class="paramname"> <em>cookie</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Provide a callback function to be called upon the completion of DryIce calls that are executed asynchronously.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>func</em>&nbsp;</td><td>This is a pointer to a function of type: void callback(di_return_t rc, unsigned long cookie) The return code of the async function is passed back in "rc" along with the cookie provided when registering the callback.</td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>cookie</em>&nbsp;</td><td>This is an "opaque" cookie of type unsigned long that is returned on subsequent callbacks. It may be of any value.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Returns SUCCESS (0), or BUSY if DryIce is busy (See <a class="el" href="dryice_8h.html#840558ca16a3df22ac79602be475f5b9">di_return_t</a>). </dd></dl>

</div>
</div><p>
<a class="anchor" name="89fff523d0ace3e8bcbd3f6c298c90de"></a><!-- doxytag: member="dryice.h::dryice_release_key_selection" ref="89fff523d0ace3e8bcbd3f6c298c90de" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="dryice_8h.html#840558ca16a3df22ac79602be475f5b9">di_return_t</a> dryice_release_key_selection           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Allow the dryice_select_key interface to be used to set a new key selection in DryIce. Note that this interface does not overwrite the value in DryIce.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Returns SUCCESS (0), BUSY if DryIce is busy, UNSET if the no selection has been made previously, and HLOCK or SLOCK if the selection register is locked (See <a class="el" href="dryice_8h.html#840558ca16a3df22ac79602be475f5b9">di_return_t</a>). </dd></dl>

<p>References <a class="el" href="dryice_8h-source.html#l00090">DI_ERR_BUSY</a>, <a class="el" href="dryice_8h-source.html#l00097">DI_ERR_HLOCK</a>, <a class="el" href="dryice_8h-source.html#l00098">DI_ERR_SLOCK</a>, and <a class="el" href="dryice_8h-source.html#l00093">DI_ERR_UNSET</a>.</p>

</div>
</div><p>
<a class="anchor" name="67de03e19e46378a7a2110d08c94db77"></a><!-- doxytag: member="dryice.h::dryice_release_programmed_key" ref="67de03e19e46378a7a2110d08c94db77" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="dryice_8h.html#840558ca16a3df22ac79602be475f5b9">di_return_t</a> dryice_release_programmed_key           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Allow the set_programmed_key interface to be used to write a new Programmed Key to DryIce. Note that this interface does not overwrite the value in the Programmed Key registers.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Returns SUCCESS (0), BUSY if DryIce is busy, UNSET if the key has not been previously set, and HLOCK or SLOCK if the key registers are locked for writing (See <a class="el" href="dryice_8h.html#840558ca16a3df22ac79602be475f5b9">di_return_t</a>). </dd></dl>

<p>References <a class="el" href="dryice_8h-source.html#l00090">DI_ERR_BUSY</a>, <a class="el" href="dryice_8h-source.html#l00097">DI_ERR_HLOCK</a>, <a class="el" href="dryice_8h-source.html#l00098">DI_ERR_SLOCK</a>, and <a class="el" href="dryice_8h-source.html#l00093">DI_ERR_UNSET</a>.</p>

</div>
</div><p>
<a class="anchor" name="d2ab024a0a0f43d6ec622254a2a5c0b9"></a><!-- doxytag: member="dryice.h::dryice_select_key" ref="d2ab024a0a0f43d6ec622254a2a5c0b9" args="(di_key_t key, int flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="dryice_8h.html#840558ca16a3df22ac79602be475f5b9">di_return_t</a> dryice_select_key           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="dryice_8h.html#c21eb81acf0f4d625f9c805a69eff9fe">di_key_t</a>&nbsp;</td>
          <td class="paramname"> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>flags</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set the key selection in DryIce to determine the key used by an encryption module such as SCC. The selection is held until a call to the Release Selected Key interface is made, or until the appropriate HW reset if the LOCK flags are used.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>key</em>&nbsp;</td><td>The source of the key to be used by the SCC (See <a class="el" href="dryice_8h.html#c21eb81acf0f4d625f9c805a69eff9fe">di_key_t</a>).</td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>flags</em>&nbsp;</td><td>This is a bit-wise OR of the flags to be passed to the function. Flags can include: ASYNC, WRITE_LOCK, and HARD_LOCK.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Returns SUCCESS (0), BUSY if DryIce is busy, INVAL on invalid arguments, INUSE if a selection has already been made, STATE if DryIce is in the wrong state, HLOCK or SLOCK if the selection register is locked, and WRITE if a write error occurs </dd></dl>

<p>References <a class="el" href="dryice_8h-source.html#l00090">DI_ERR_BUSY</a>, <a class="el" href="dryice_8h-source.html#l00097">DI_ERR_HLOCK</a>, <a class="el" href="dryice_8h-source.html#l00092">DI_ERR_INUSE</a>, <a class="el" href="dryice_8h-source.html#l00095">DI_ERR_INVAL</a>, <a class="el" href="dryice_8h-source.html#l00098">DI_ERR_SLOCK</a>, <a class="el" href="dryice_8h-source.html#l00091">DI_ERR_STATE</a>, <a class="el" href="dryice_8h-source.html#l00051">DI_FUNC_FLAG_ASYNC</a>, <a class="el" href="dryice_8h-source.html#l00054">DI_FUNC_FLAG_HARD_LOCK</a>, <a class="el" href="dryice_8h-source.html#l00053">DI_FUNC_FLAG_WRITE_LOCK</a>, <a class="el" href="dryice_8h-source.html#l00078">DI_KEY_FK</a>, <a class="el" href="dryice_8h-source.html#l00081">DI_KEY_FPK</a>, <a class="el" href="dryice_8h-source.html#l00082">DI_KEY_FRK</a>, <a class="el" href="dryice_8h-source.html#l00079">DI_KEY_PK</a>, and <a class="el" href="dryice_8h-source.html#l00080">DI_KEY_RK</a>.</p>

</div>
</div><p>
<a class="anchor" name="e278a8777c932e2e76653b978d85bf6d"></a><!-- doxytag: member="dryice.h::dryice_set_programmed_key" ref="e278a8777c932e2e76653b978d85bf6d" args="(const void *key_data, int key_bits, int flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="dryice_8h.html#840558ca16a3df22ac79602be475f5b9">di_return_t</a> dryice_set_programmed_key           </td>
          <td>(</td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>key_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>key_bits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>flags</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
These functions define the DryIce API.<p>
Write a given key to the Programmed Key registers in DryIce, and optionally lock the Programmed Key against either reading or further writing. The value is held until a call to the release_programmed_key interface is made, or until the appropriate HW reset if the write-lock flags are used. Unused key bits will be zeroed.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>key_data</em>&nbsp;</td><td>A pointer to the key data to be programmed, with the most significant byte or word first. This will be interpreted as a byte pointer unless the WORD_KEY flag is set, in which case it will be treated as a word pointer and the key data will be read a word at a time, starting with the MSW. When called asynchronously, the data pointed to by key_data must persist until the operation completes.</td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>key_bits</em>&nbsp;</td><td>The number of bits in the key to be stored. This must be a multiple of 8 and within the range of 0 and MAX_KEY_LEN.</td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>flags</em>&nbsp;</td><td>This is a bit-wise OR of the flags to be passed to the function. Flags can include: ASYNC, READ_LOCK, WRITE_LOCK, HARD_LOCK, and WORD_KEY.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Returns SUCCESS (0), BUSY if DryIce is busy, INVAL on invalid arguments, INUSE if key has already been programmed, STATE if DryIce is in the wrong state, HLOCK or SLOCK if the key registers are locked for writing, and WRITE if a write error occurs (See <a class="el" href="dryice_8h.html#840558ca16a3df22ac79602be475f5b9">di_return_t</a>). </dd></dl>

<p>References <a class="el" href="dryice_8h-source.html#l00090">DI_ERR_BUSY</a>, <a class="el" href="dryice_8h-source.html#l00097">DI_ERR_HLOCK</a>, <a class="el" href="dryice_8h-source.html#l00092">DI_ERR_INUSE</a>, <a class="el" href="dryice_8h-source.html#l00095">DI_ERR_INVAL</a>, <a class="el" href="dryice_8h-source.html#l00098">DI_ERR_SLOCK</a>, <a class="el" href="dryice_8h-source.html#l00091">DI_ERR_STATE</a>, <a class="el" href="dryice_8h-source.html#l00051">DI_FUNC_FLAG_ASYNC</a>, <a class="el" href="dryice_8h-source.html#l00054">DI_FUNC_FLAG_HARD_LOCK</a>, <a class="el" href="dryice_8h-source.html#l00052">DI_FUNC_FLAG_READ_LOCK</a>, <a class="el" href="dryice_8h-source.html#l00055">DI_FUNC_FLAG_WORD_KEY</a>, <a class="el" href="dryice_8h-source.html#l00053">DI_FUNC_FLAG_WRITE_LOCK</a>, and <a class="el" href="dryice_8h-source.html#l00043">MAX_KEY_LEN</a>.</p>

</div>
</div><p>
<a class="anchor" name="3dbd81039ec6ba8d9259e1fc2c997c4b"></a><!-- doxytag: member="dryice.h::dryice_set_random_key" ref="3dbd81039ec6ba8d9259e1fc2c997c4b" args="(int flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="dryice_8h.html#840558ca16a3df22ac79602be475f5b9">di_return_t</a> dryice_set_random_key           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>flags</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Generate and load a new Random Key in DryIce, and optionally lock the Random Key against further change.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>flags</em>&nbsp;</td><td>This is a bit-wise OR of the flags to be passed to the function. Flags can include: ASYNC, READ_LOCK, WRITE_LOCK, and HARD_LOCK.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Returns SUCCESS (0), BUSY if DryIce is busy, STATE if DryIce is in the wrong state, FAIL if the key gen failed, HLOCK or SLOCK if the key registers are locked, and WRITE if a write error occurs (See <a class="el" href="dryice_8h.html#840558ca16a3df22ac79602be475f5b9">di_return_t</a>). </dd></dl>

<p>References <a class="el" href="dryice_8h-source.html#l00090">DI_ERR_BUSY</a>, <a class="el" href="dryice_8h-source.html#l00097">DI_ERR_HLOCK</a>, <a class="el" href="dryice_8h-source.html#l00098">DI_ERR_SLOCK</a>, <a class="el" href="dryice_8h-source.html#l00091">DI_ERR_STATE</a>, <a class="el" href="dryice_8h-source.html#l00051">DI_FUNC_FLAG_ASYNC</a>, <a class="el" href="dryice_8h-source.html#l00054">DI_FUNC_FLAG_HARD_LOCK</a>, and <a class="el" href="dryice_8h-source.html#l00053">DI_FUNC_FLAG_WRITE_LOCK</a>.</p>

</div>
</div><p>
</div>
<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<meta name="GENERATOR" content="Microsoft FrontPage 5.0">
<Title>footer</Title>
</HEAD>
<BODY>
</ul>
</ul>
</ul>
</ul>
<hr size="1">
<table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber1">
  <tr>
    <td width="50%"><small>&nbsp; Freescale Semiconductor, Inc., 2007.&nbsp; 
    All rights reserved.<br>
    </small><FONT COLOR="#FF0000"><small>Freescale Confidential Proprietary<br>
    </small></FONT><small><FONT COLOR="#FF0000">NDA Required</FONT></small></td>
    <td width="50%"><small>
<a href="http://www.doxygen.org/index.html">
<img src="Freescale25.png" alt="doxygen" align="right" border="0" width="129" height="48"></a></small></td>
  </tr>
</table>
<address style="align: right;">&nbsp;</address>
</body>
</html>
