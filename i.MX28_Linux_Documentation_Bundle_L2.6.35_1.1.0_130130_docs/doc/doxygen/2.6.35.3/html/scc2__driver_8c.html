<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>MXC Linux BSP: linux/drivers/mxc/security/scc2_driver.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="contents">
<h1>linux/drivers/mxc/security/scc2_driver.c File Reference</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
This is the driver code for the Security Controller version 2 (SCC2). It's interaction with the Linux kernel is from calls to scc_init() when the driver is loaded, and scc_cleanup() should the driver be unloaded. The driver uses locking and (task-sleep/task-wakeup) functions from the kernel. It also registers itself to handle the interrupt line(s) from the SCC. New to this version of the driver is an interface providing access to the secure partitions. This is in turn exposed to the API user through the <a class="el" href="shw__driver_8h.html#gb4c9ca955c5851d6f19a43f1f075beb4">fsl_shw_smalloc()</a> series of functions. Other drivers in the kernel may use the remaining API functions to get at the services of the SCC. The main service provided is the Secure Memory, which allows encoding and decoding of secrets with a per-chip secret key.<p>
The SCC is single-threaded, and so is this module. When the scc_crypt() routine is called, it will lock out other accesses to the function. If another task is already in the module, the subsequent caller will spin on a lock waiting for the other access to finish.<p>
Note that long crypto operations could cause a task to spin for a while, preventing other kernel work (other than interrupt processing) to get done.<p>
The external (kernel module) interface is through the following functions: <ul>
<li>scc_get_configuration() </li>
<li>scc_crypt() </li>
<li>scc_zeroize_memories() </li>
<li>scc_monitor_security_failure() </li>
<li>scc_stop_monitoring_security_failure() </li>
<li>scc_set_sw_alarm() </li>
<li>scc_read_register() </li>
<li>scc_write_register() </li>
<li>scc_allocate_partition() </li>
<li>scc_initialize_partition </li>
<li>scc_release_partition() </li>
<li>scc_diminish_permissions </li>
<li>scc_encrypt_region() </li>
<li>scc_decrypt_region() </li>
<li>scc_virt_to_phys</li>
</ul>
All other functions are internal to the driver. </div>
<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<meta name="GENERATOR" content="Microsoft FrontPage 5.0">
<Title>footer</Title>
</HEAD>
<BODY>
</ul>
</ul>
</ul>
</ul>
<hr size="1">
<table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber1">
  <tr>
    <td width="50%"><small>©&nbsp; Freescale Semiconductor, Inc., 2007.&nbsp; 
    All rights reserved.<br>
    </small><FONT COLOR="#FF0000"><small>Freescale Confidential Proprietary<br>
    </small></FONT><small><FONT COLOR="#FF0000">NDA Required</FONT></small></td>
    <td width="50%"><small>
<a href="http://www.doxygen.org/index.html">
<img src="Freescale25.png" alt="doxygen" align="right" border="0" width="129" height="48"></a></small></td>
  </tr>
</table>
<address style="align: right;">&nbsp;</address>
</body>
</html>
