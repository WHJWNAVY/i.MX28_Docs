<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>MXC Linux BSP: linux/drivers/mxc/security/rng/rng_driver.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="contents">
<h1>linux/drivers/mxc/security/rng/rng_driver.c File Reference</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rng__driver_8c.html#a93f0eb578d23995850d61f7d61c55c1">FALSE</a>&nbsp;&nbsp;&nbsp;0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rng__driver_8c.html#a8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rng__driver_8c.html#d23b6498c2dfff477c3bb0c17ea3b966">DECLARE_COMPLETION</a> (rng_self_testing)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rng__driver_8c.html#160e369c26d78c26568caf5c6379ceea">OS_WAIT_OBJECT</a> (rng_wait_queue)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rng__driver_8c.html#733bc413dcf14a21f6e8aac4507475a9">OS_DEV_INIT</a> (rng_init)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rng__driver_8c.html#fbb061d258e61f91e332cafe3043761f">OS_DEV_SHUTDOWN</a> (rng_shutdown)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rng__driver_8c.html#b2f47c7de20c355e464b51428ea6ff96">rng_cleanup</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rng__driver_8c.html#e9a0b39522f38067e10393542a19f5cd">finish_random</a> (shw_queue_entry_t *gen_entry)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="shw__driver_8h.html#4d2b660905d31e2f8d24ad6f13150b35">fsl_shw_return_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__opfuns.html#g2aba93b3238c1ead9a1e3fc5f4f2d619">fsl_shw_get_random</a> (<a class="el" href="structfsl__shw__uco__t.html">fsl_shw_uco_t</a> *user_ctx, uint32_t length, uint8_t *data)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="shw__driver_8h.html#4d2b660905d31e2f8d24ad6f13150b35">fsl_shw_return_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__opfuns.html#g80cd0b9ba062845ef4eeac5413a0d579">fsl_shw_add_entropy</a> (<a class="el" href="structfsl__shw__uco__t.html">fsl_shw_uco_t</a> *user_ctx, uint32_t length, uint8_t *data)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rng__driver_8c.html#e460c253a334ef938d9fed830e48b3a4">OS_DEV_ISR</a> (rng_irq)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="portable__os_8h.html#5bea54bf8ff6cfca0e16593c776a898d">os_error_code</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rng__driver_8c.html#639bde37a147311fea3c0648aa0b48b7">rng_map_RNG_memory</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="portable__os_8h.html#5bea54bf8ff6cfca0e16593c776a898d">os_error_code</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rng__driver_8c.html#ccc08d1856ab37a1d9bafbb5b9ed7e16">rng_setup_interrupt_handling</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="portable__os_8h.html#5bea54bf8ff6cfca0e16593c776a898d">os_error_code</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rng__driver_8c.html#d2a8f3b698d8b8fb985acd8161fb823e">rng_grab_config_values</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="shw__driver_8h.html#4d2b660905d31e2f8d24ad6f13150b35">fsl_shw_return_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rng__driver_8c.html#bcaa112604367d35935779ab451068ee">rng_drain_fifo</a> (uint32_t *random_p, int count_words)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rng__driver_8c.html#72f7a42b423373397f51b5f038e0adb2">OS_DEV_TASK</a> (rng_entropy_task)</td></tr>

<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static volatile void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rng__driver_8c.html#314aa5385e371ba87a8e0d282b751804">rng_base</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rng__driver_8c.html#25e371d72abe01100d7d8d92c522ea39">rng_irq_set</a> = FALSE</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rng__driver_8c.html#bac79a0acbcdb4dec001977039d219e8">rng_output_fifo_size</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rng__driver_8c.html#7c20370fdde3c06b84aaa7144498fe49">rng_major</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="portable__os_8h.html#4099620f0c099a877846b3739098b600">os_driver_reg_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rng__driver_8c.html#a55b3f4ceed1c279b42df8c890a6ed16">rng_reg_handle</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static volatile <a class="el" href="group__rngcompileflags.html#g435adc1ca9d3fa3a01de29de17573921">rng_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rng__driver_8c.html#6e0583003a40f2aa88b4260209a6060c">rng_availability</a> = RNG_STATUS_INITIAL</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="portable__os_8h.html#a35d1aba68029da3351f918d97ab8e41">os_lock_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rng__driver_8c.html#1884508fa39939afc5e600f7767e5a2c">rng_queue_lock</a> = NULL</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static shw_queue_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rng__driver_8c.html#8292109f0f0d507ac8d1d3a9f9e79511">rng_work_queue</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rng__driver_8c.html#1a9491b21c4a157133520f9ba2c5dded">task_started</a> = FALSE</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
This is the driver code for the hardware Random Number Generator (RNG).<p>
It provides the following functions to callers: fsl_shw_return_t fsl_shw_get_random(fsl_shw_uco_t* user_ctx, uint32_t length, uint8_t* data);<p>
fsl_shw_return_t fsl_shw_add_entropy(fsl_shw_uco_t* user_ctx, uint32_t length, uint8_t* data);<p>
The life of the driver starts at boot (or module load) time, with a call by the kernel to rng_init(). As part of initialization, a background task running rng_entropy_task() will be created.<p>
The life of the driver ends when the kernel is shutting down (or the driver is being unloaded). At this time, rng_shutdown() is called. No function will ever be called after that point. In the case that the driver is reloaded, a new copy of the driver, with fresh global values, etc., is loaded, and there will be a new call to rng_init().<p>
A call to <a class="el" href="group__opfuns.html#g2aba93b3238c1ead9a1e3fc5f4f2d619">fsl_shw_get_random()</a> gets converted into a work entry which is queued and handed off to a background task for fulfilment. This provides for a single thread of control for reading the RNG's FIFO register, which might otherwise underflow if not carefully managed.<p>
A call to <a class="el" href="group__opfuns.html#g80cd0b9ba062845ef4eeac5413a0d579">fsl_shw_add_entropy()</a> will cause the additional entropy to be passed directly into the hardware.<p>
In a debug configuration, it provides the following kernel functions: rng_return_t rng_read_register(uint32_t byte_offset, uint32_t* valuep); rng_return_t rng_write_register(uint32_t byte_offset, uint32_t value); <hr><h2>Define Documentation</h2>
<a class="anchor" name="a93f0eb578d23995850d61f7d61c55c1"></a><!-- doxytag: member="rng_driver.c::FALSE" ref="a93f0eb578d23995850d61f7d61c55c1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FALSE&nbsp;&nbsp;&nbsp;0          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Non-true value for arguments, return values. 
<p>Referenced by <a class="el" href="rng__driver_8c-source.html#l00489">fsl_shw_get_random()</a>, <a class="el" href="rng__driver_8c-source.html#l00811">OS_DEV_ISR()</a>, <a class="el" href="shw__driver_8c-source.html#l00647">OS_DEV_MMAP()</a>, <a class="el" href="rng__internals_8h-source.html#l00251">RNG_ADD_WORK_ENTRY()</a>, and <a class="el" href="rng__driver_8c-source.html#l00414">rng_cleanup()</a>.</p>

</div>
</div><p>
<a class="anchor" name="a8cecfc5c5c054d2875c03e77b7be15d"></a><!-- doxytag: member="rng_driver.c::TRUE" ref="a8cecfc5c5c054d2875c03e77b7be15d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRUE&nbsp;&nbsp;&nbsp;1          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
True value for arguments, return values. 
<p>Referenced by <a class="el" href="rng__driver_8c-source.html#l00554">fsl_shw_add_entropy()</a>, <a class="el" href="rng__test_8c-source.html#l00126">main()</a>, <a class="el" href="rng__driver_8c-source.html#l00187">OS_DEV_INIT()</a>, <a class="el" href="rng__driver_8c-source.html#l00811">OS_DEV_ISR()</a>, <a class="el" href="shw__driver_8c-source.html#l00647">OS_DEV_MMAP()</a>, <a class="el" href="rng__driver_8c-source.html#l01033">OS_DEV_TASK()</a>, <a class="el" href="rng__driver_8c-source.html#l00874">rng_setup_interrupt_handling()</a>, and <a class="el" href="shw__driver_8c-source.html#l00820">shw_setup_user_driver_interaction()</a>.</p>

</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="d23b6498c2dfff477c3bb0c17ea3b966"></a><!-- doxytag: member="rng_driver.c::DECLARE_COMPLETION" ref="d23b6498c2dfff477c3bb0c17ea3b966" args="(rng_self_testing)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static DECLARE_COMPLETION           </td>
          <td>(</td>
          <td class="paramtype">rng_self_testing&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Waiting queue for RNG SELF TESTING 
</div>
</div><p>
<a class="anchor" name="e9a0b39522f38067e10393542a19f5cd"></a><!-- doxytag: member="rng_driver.c::finish_random" ref="e9a0b39522f38067e10393542a19f5cd" args="(shw_queue_entry_t *gen_entry)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static uint32_t finish_random           </td>
          <td>(</td>
          <td class="paramtype">shw_queue_entry_t *&nbsp;</td>
          <td class="paramname"> <em>gen_entry</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Post-process routine for <a class="el" href="group__opfuns.html#g2aba93b3238c1ead9a1e3fc5f4f2d619">fsl_shw_get_random()</a>.<p>
This function will copy the random data generated by the background task into the user's buffer and then free the local buffer.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>gen_entry</em>&nbsp;</td><td>The work request.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 = meaning work completed, pass back result. </dd></dl>

<p>References <a class="el" href="rng__driver_8h-source.html#l00086">rng_work_entry::data_local</a>, <a class="el" href="rng__driver_8h-source.html#l00087">rng_work_entry::data_user</a>, <a class="el" href="shw__driver_8h-source.html#l00140">FSL_UCO_USERMODE_USER</a>, <a class="el" href="rng__driver_8h-source.html#l00084">rng_work_entry::hdr</a>, <a class="el" href="rng__driver_8h-source.html#l00085">rng_work_entry::length</a>, <a class="el" href="group__dkops.html#g1dc2eba81acedb6ec16595589433e53f">os_copy_to_user()</a>, and <a class="el" href="group__dkops.html#gcda51a54b44ce0788a295d92faa917de">os_free_memory()</a>.</p>

<p>Referenced by <a class="el" href="rng__driver_8c-source.html#l00489">fsl_shw_get_random()</a>.</p>

</div>
</div><p>
<a class="anchor" name="733bc413dcf14a21f6e8aac4507475a9"></a><!-- doxytag: member="rng_driver.c::OS_DEV_INIT" ref="733bc413dcf14a21f6e8aac4507475a9" args="(rng_init)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OS_DEV_INIT           </td>
          <td>(</td>
          <td class="paramtype">rng_init&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initialize the driver.<p>
Set up the driver to have access to RNG device registers and verify that it appears to be a proper working device.<p>
Set up interrupt handling. Assure RNG is ready to go and (possibly) set it into High Assurance mode. Create a background task to run rng_entropy_task(). Set up up a callback with the SCC driver should the security alarm go off. Tell the kernel that the driver is here.<p>
This routine is called during kernel init or module load (insmod).<p>
The function will fail in one of two ways: Returning OK to the caller so that kernel startup / driver initialization completes, or returning an error. In the success case, the function could set the rng_avaailability to RNG_STATUS_FAILED so that only minimal support (e.g. register peek / poke) is available in the driver.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>a call to <a class="el" href="group__retfns.html#gfadc5345f93845736be4d7f8bb239a05">os_dev_init_return()</a> </dd></dl>

<p>References <a class="el" href="group__dkops.html#g16c6b2188726b4fe088f472f80ec4964">os_create_task()</a>, <a class="el" href="group__retfns.html#gfadc5345f93845736be4d7f8bb239a05">os_dev_init_return()</a>, <a class="el" href="group__dkops.html#g08371d56a1c9a9d6b6dbcf8d5a080bb3">os_driver_complete_registration()</a>, <a class="el" href="group__dkops.html#gee0e81a853a702de227a8cdc5537470f">os_driver_init_registration()</a>, <a class="el" href="portable__os_8h-source.html#l00243">OS_ERROR_FAIL_S</a>, <a class="el" href="portable__os_8h-source.html#l00242">OS_ERROR_OK_S</a>, <a class="el" href="group__dkops.html#gd4338ff9bdad14659d26d388971e65f9">os_lock_alloc_init()</a>, <a class="el" href="group__dkops.html#g0499729d4b98c8d8a53372c6d76ad5da">os_printk()</a>, <a class="el" href="rng__driver_8c-source.html#l00130">rng_availability</a>, <a class="el" href="rng__driver_8c-source.html#l00106">rng_base</a>, <a class="el" href="rng__internals_8h-source.html#l00551">RNG_CHECK_SEED_ERR</a>, <a class="el" href="rng__internals_8h-source.html#l00548">RNG_CHECK_SELF_ERR</a>, <a class="el" href="rng__driver_8c-source.html#l00414">rng_cleanup()</a>, <a class="el" href="rng__internals_8h-source.html#l00588">RNG_CLEAR_ALL_STATUS</a>, <a class="el" href="rng__internals_8h-source.html#l00562">RNG_CLEAR_ERR</a>, <a class="el" href="rng__internals_8h-source.html#l00196">RNG_DRIVER_NAME</a>, <a class="el" href="rng__internals_8h-source.html#l00584">RNG_GET_HIGH_ASSURANCE</a>, <a class="el" href="rng__internals_8h-source.html#l00485">RNG_GET_STATUS</a>, <a class="el" href="rng__internals_8h-source.html#l00544">RNG_GO</a>, <a class="el" href="rng__driver_8c-source.html#l00904">rng_grab_config_values()</a>, <a class="el" href="rng__internals_8h-source.html#l00512">RNG_HAS_BAD_KEY</a>, <a class="el" href="rng__internals_8h-source.html#l00509">RNG_HAS_ERROR</a>, <a class="el" href="rng__driver_8c-source.html#l00120">rng_major</a>, <a class="el" href="rng__driver_8c-source.html#l00851">rng_map_RNG_memory()</a>, <a class="el" href="rng__internals_8h-source.html#l00609">RNG_MASK_ALL_INTERRUPTS</a>, <a class="el" href="rng__internals_8h-source.html#l00515">RNG_OSCILLATOR_FAILED</a>, <a class="el" href="rng__internals_8h-source.html#l00634">RNG_PUT_RNG_TO_SLEEP</a>, <a class="el" href="rng__driver_8c-source.html#l00136">rng_queue_lock</a>, <a class="el" href="rng__internals_8h-source.html#l00170">RNG_READ_REGISTER</a>, <a class="el" href="rng__driver_8c-source.html#l00123">rng_reg_handle</a>, <a class="el" href="rng__internals_8h-source.html#l00555">RNG_SELF_TEST</a>, <a class="el" href="rng__internals_8h-source.html#l00546">RNG_SET_HIGH_ASSURANCE</a>, <a class="el" href="rng__driver_8c-source.html#l00874">rng_setup_interrupt_handling()</a>, <a class="el" href="rng__internals_8h-source.html#l00213">RNG_STATUS_CHECKING</a>, <a class="el" href="rng__internals_8h-source.html#l00216">RNG_STATUS_FAILED</a>, <a class="el" href="rng__internals_8h-source.html#l00215">RNG_STATUS_OK</a>, <a class="el" href="rng__internals_8h-source.html#l00214">RNG_STATUS_UNIMPLEMENTED</a>, <a class="el" href="rng__internals_8h-source.html#l00626">RNG_UNMASK_ALL_INTERRUPTS</a>, <a class="el" href="rng__internals_8h-source.html#l00542">RNG_WAKE</a>, <a class="el" href="rng__driver_8c-source.html#l00141">rng_work_queue</a>, <a class="el" href="rng__internals_8h-source.html#l00594">RNG_WORKING</a>, <a class="el" href="rng__rngc_8h-source.html#l00046">RNGC_ERROR</a>, <a class="el" href="rng__rngc_8h-source.html#l00044">RNGC_STATUS</a>, <a class="el" href="rng__driver_8c-source.html#l00146">task_started</a>, and <a class="el" href="rng__driver_8c-source.html#l00080">TRUE</a>.</p>

</div>
</div><p>
<a class="anchor" name="e460c253a334ef938d9fed830e48b3a4"></a><!-- doxytag: member="rng_driver.c::OS_DEV_ISR" ref="e460c253a334ef938d9fed830e48b3a4" args="(rng_irq)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OS_DEV_ISR           </td>
          <td>(</td>
          <td class="paramtype">rng_irq&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This is the interrupt handler for the RNG. It is only ever invoked if the RNG detects a FIFO Underflow error.<p>
If the error is a Security Violation, this routine will set the <a class="el" href="rng__driver_8c.html#6e0583003a40f2aa88b4260209a6060c">rng_availability</a> to <a class="el" href="group__rngcompileflags.html#gg92d7f54ca8a32a2890698a432bc93f35e5cae59c6c8a4aedc65ca9658ec07131">RNG_STATUS_FAILED</a>, as the entropy pool may have been corrupted. The RNG will also be placed into low power mode. The SCC will have noticed the problem as well.<p>
The other possibility, if the RNG is not in High Assurance mode, would be simply a FIFO Underflow. No special action, other than to clear the interrupt, is taken. 
<p>References <a class="el" href="rng__driver_8c-source.html#l00076">FALSE</a>, <a class="el" href="group__retfns.html#g58a9de6562bded4726083aec0043ba40">os_dev_isr_return()</a>, <a class="el" href="rng__driver_8c-source.html#l00130">rng_availability</a>, <a class="el" href="rng__internals_8h-source.html#l00588">RNG_CLEAR_ALL_STATUS</a>, <a class="el" href="rng__internals_8h-source.html#l00584">RNG_GET_HIGH_ASSURANCE</a>, <a class="el" href="rng__internals_8h-source.html#l00509">RNG_HAS_ERROR</a>, <a class="el" href="rng__internals_8h-source.html#l00609">RNG_MASK_ALL_INTERRUPTS</a>, <a class="el" href="rng__internals_8h-source.html#l00600">RNG_SEED_DONE</a>, <a class="el" href="rng__internals_8h-source.html#l00570">RNG_SELF_TEST_DONE</a>, <a class="el" href="rng__internals_8h-source.html#l00604">RNG_SLEEP</a>, <a class="el" href="rng__internals_8h-source.html#l00216">RNG_STATUS_FAILED</a>, and <a class="el" href="rng__driver_8c-source.html#l00080">TRUE</a>.</p>

</div>
</div><p>
<a class="anchor" name="fbb061d258e61f91e332cafe3043761f"></a><!-- doxytag: member="rng_driver.c::OS_DEV_SHUTDOWN" ref="fbb061d258e61f91e332cafe3043761f" args="(rng_shutdown)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OS_DEV_SHUTDOWN           </td>
          <td>(</td>
          <td class="paramtype">rng_shutdown&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Prepare driver for exit.<p>
This is called during <code>rmmod</code> when the driver is unloading. Try to undo whatever was done during rng_init(), to make the machine be in the same state, if possible.<p>
Calls <a class="el" href="rng__driver_8c.html#b2f47c7de20c355e464b51428ea6ff96">rng_cleanup()</a> to do all work, and then unmap device's register space. 
<p>References <a class="el" href="group__retfns.html#gd55be53a69af69ba1c9b17b413fad0c6">os_dev_shutdown_return()</a>, <a class="el" href="group__dkops.html#g745130e9c17f4cf2bf12cd94bfc4dfd0">os_driver_remove_registration()</a>, <a class="el" href="portable__os_8h-source.html#l00242">OS_ERROR_OK_S</a>, <a class="el" href="group__dkops.html#g063e51a71245abecf155e67ad3415761">os_unmap_device()</a>, <a class="el" href="rng__rngc_8h-source.html#l00233">RNG_ADDRESS_RANGE</a>, <a class="el" href="rng__driver_8c-source.html#l00106">rng_base</a>, <a class="el" href="rng__driver_8c-source.html#l00414">rng_cleanup()</a>, and <a class="el" href="rng__driver_8c-source.html#l00123">rng_reg_handle</a>.</p>

</div>
</div><p>
<a class="anchor" name="72f7a42b423373397f51b5f038e0adb2"></a><!-- doxytag: member="rng_driver.c::OS_DEV_TASK" ref="72f7a42b423373397f51b5f038e0adb2" args="(rng_entropy_task)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OS_DEV_TASK           </td>
          <td>(</td>
          <td class="paramtype">rng_entropy_task&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This is the background task of the driver. It is scheduled by <a class="el" href="group__rngcompileflags.html#g396e9909dcd4250d5adce66f6dbf8e21">RNG_ADD_WORK_ENTRY()</a>.<p>
This will process each entry on the <a class="el" href="rng__driver_8c.html#8292109f0f0d507ac8d1d3a9f9e79511">rng_work_queue</a>. Blocking requests will cause sleepers to be awoken. Non-blocking requests will be placed on the results queue, and if appropriate, the callback function will be invoked. 
<p>References <a class="el" href="rng__internals_8h-source.html#l00207">BYTES_TO_WORDS</a>, <a class="el" href="rng__driver_8h-source.html#l00088">rng_work_entry::completed</a>, <a class="el" href="rng__driver_8h-source.html#l00086">rng_work_entry::data_local</a>, <a class="el" href="shw__driver_8h-source.html#l00114">FSL_UCO_BLOCKING_MODE</a>, <a class="el" href="shw__driver_8h-source.html#l00120">FSL_UCO_CALLBACK_MODE</a>, <a class="el" href="rng__driver_8h-source.html#l00084">rng_work_entry::hdr</a>, <a class="el" href="rng__driver_8h-source.html#l00085">rng_work_entry::length</a>, <a class="el" href="group__retfns.html#g2eb7324ee5bf121cc49e89628870c0db">os_dev_task_begin()</a>, <a class="el" href="group__retfns.html#g89e8d64266ec3f3d8809694b459034e3">os_dev_task_return()</a>, <a class="el" href="portable__os_8h-source.html#l00242">OS_ERROR_OK_S</a>, <a class="el" href="group__dkops.html#g8bcf7e7da2c6a3329cdaa32bf59c0cbc">os_lock_save_context()</a>, <a class="el" href="group__dkops.html#g059adc093b8dca445a4a4e8bfd89b540">os_unlock_restore_context()</a>, <a class="el" href="group__dkops.html#g38c6ca1a524b1e0a6cd5b08e362e91d3">os_wake_sleepers()</a>, <a class="el" href="rng__driver_8c-source.html#l00943">rng_drain_fifo()</a>, <a class="el" href="rng__driver_8c-source.html#l00136">rng_queue_lock</a>, and <a class="el" href="rng__driver_8c-source.html#l00080">TRUE</a>.</p>

</div>
</div><p>
<a class="anchor" name="160e369c26d78c26568caf5c6379ceea"></a><!-- doxytag: member="rng_driver.c::OS_WAIT_OBJECT" ref="160e369c26d78c26568caf5c6379ceea" args="(rng_wait_queue)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OS_WAIT_OBJECT           </td>
          <td>(</td>
          <td class="paramtype">rng_wait_queue&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Object for blocking-mode callers of RNG driver to sleep. 
</div>
</div><p>
<a class="anchor" name="b2f47c7de20c355e464b51428ea6ff96"></a><!-- doxytag: member="rng_driver.c::rng_cleanup" ref="b2f47c7de20c355e464b51428ea6ff96" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void rng_cleanup           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Undo everything done by rng_init() and place driver in fail mode.<p>
Deregister from SCC, stop tasklet, shutdown the RNG. Leave the register map in place in case other drivers call rng_read/write_register()<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>void </dd></dl>

<p>References <a class="el" href="rng__driver_8c-source.html#l00076">FALSE</a>, <a class="el" href="group__dkops.html#gfb310b098fb04642f07c21af3df403e0">os_deregister_interrupt()</a>, <a class="el" href="rng__driver_8c-source.html#l00130">rng_availability</a>, <a class="el" href="rng__driver_8c-source.html#l00106">rng_base</a>, <a class="el" href="rng__driver_8c-source.html#l00111">rng_irq_set</a>, <a class="el" href="rng__internals_8h-source.html#l00609">RNG_MASK_ALL_INTERRUPTS</a>, <a class="el" href="rng__internals_8h-source.html#l00604">RNG_SLEEP</a>, <a class="el" href="rng__internals_8h-source.html#l00216">RNG_STATUS_FAILED</a>, <a class="el" href="rng__internals_8h-source.html#l00214">RNG_STATUS_UNIMPLEMENTED</a>, and <a class="el" href="rng__driver_8c-source.html#l00146">task_started</a>.</p>

<p>Referenced by <a class="el" href="rng__driver_8c-source.html#l00187">OS_DEV_INIT()</a>, and <a class="el" href="rng__driver_8c-source.html#l00387">OS_DEV_SHUTDOWN()</a>.</p>

</div>
</div><p>
<a class="anchor" name="bcaa112604367d35935779ab451068ee"></a><!-- doxytag: member="rng_driver.c::rng_drain_fifo" ref="bcaa112604367d35935779ab451068ee" args="(uint32_t *random_p, int count_words)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="shw__driver_8h.html#4d2b660905d31e2f8d24ad6f13150b35">fsl_shw_return_t</a> rng_drain_fifo           </td>
          <td>(</td>
          <td class="paramtype">uint32_t *&nbsp;</td>
          <td class="paramname"> <em>random_p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>count_words</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function copies words from the RNG FIFO into the caller's buffer.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>random_p</em>&nbsp;</td><td>Location to copy random data </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>count_words</em>&nbsp;</td><td>Number of words to copy</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>An error code. </dd></dl>

<p>References <a class="el" href="shw__driver_8h-source.html#l00159">FSL_RETURN_ERROR_S</a>, <a class="el" href="shw__driver_8h-source.html#l00183">FSL_RETURN_INTERNAL_ERROR_S</a>, <a class="el" href="shw__driver_8h-source.html#l00163">FSL_RETURN_NO_RESOURCE_S</a>, <a class="el" href="shw__driver_8h-source.html#l00157">FSL_RETURN_OK_S</a>, <a class="el" href="group__dkops.html#g0499729d4b98c8d8a53372c6d76ad5da">os_printk()</a>, <a class="el" href="rng__driver_8c-source.html#l00130">rng_availability</a>, <a class="el" href="rng__internals_8h-source.html#l00551">RNG_CHECK_SEED_ERR</a>, <a class="el" href="rng__internals_8h-source.html#l00562">RNG_CLEAR_ERR</a>, <a class="el" href="rng__internals_8h-source.html#l00524">RNG_GET_WORDS_IN_FIFO</a>, <a class="el" href="rng__internals_8h-source.html#l00060">RNG_MAX_TRIES</a>, <a class="el" href="rng__internals_8h-source.html#l00529">RNG_READ_FIFO</a>, and <a class="el" href="rng__internals_8h-source.html#l00215">RNG_STATUS_OK</a>.</p>

<p>Referenced by <a class="el" href="rng__driver_8c-source.html#l01033">OS_DEV_TASK()</a>.</p>

</div>
</div><p>
<a class="anchor" name="d2a8f3b698d8b8fb985acd8161fb823e"></a><!-- doxytag: member="rng_driver.c::rng_grab_config_values" ref="d2a8f3b698d8b8fb985acd8161fb823e" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="portable__os_8h.html#5bea54bf8ff6cfca0e16593c776a898d">os_error_code</a> rng_grab_config_values           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read configuration information from the RNG.<p>
Sets <a class="el" href="rng__driver_8c.html#bac79a0acbcdb4dec001977039d219e8">rng_output_fifo_size</a>.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>A error code indicating whether the part is the expected one. </dd></dl>

<p>References <a class="el" href="portable__os_8h-source.html#l00243">OS_ERROR_FAIL_S</a>, <a class="el" href="portable__os_8h-source.html#l00242">OS_ERROR_OK_S</a>, <a class="el" href="rng__internals_8h-source.html#l00519">RNG_GET_FIFO_SIZE</a>, <a class="el" href="rng__internals_8h-source.html#l00491">RNG_GET_RNG_TYPE</a>, <a class="el" href="rng__driver_8c-source.html#l00117">rng_output_fifo_size</a>, and <a class="el" href="rng__internals_8h-source.html#l00504">RNG_VERIFY_TYPE</a>.</p>

<p>Referenced by <a class="el" href="rng__driver_8c-source.html#l00187">OS_DEV_INIT()</a>.</p>

</div>
</div><p>
<a class="anchor" name="639bde37a147311fea3c0648aa0b48b7"></a><!-- doxytag: member="rng_driver.c::rng_map_RNG_memory" ref="639bde37a147311fea3c0648aa0b48b7" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="portable__os_8h.html#5bea54bf8ff6cfca0e16593c776a898d">os_error_code</a> rng_map_RNG_memory           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Place the RNG's memory into kernel virtual space.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>OS_ERROR_OK_S on success, os_error_code on failure </dd></dl>

<p>References <a class="el" href="portable__os_8h-source.html#l00243">OS_ERROR_FAIL_S</a>, <a class="el" href="portable__os_8h-source.html#l00242">OS_ERROR_OK_S</a>, <a class="el" href="group__dkops.html#ga4a77052164ac99fc1369d44fed670a8">os_map_device()</a>, <a class="el" href="rng__rngc_8h-source.html#l00233">RNG_ADDRESS_RANGE</a>, <a class="el" href="rng__driver_8c-source.html#l00106">rng_base</a>, and <a class="el" href="rng__internals_8h-source.html#l00481">RNG_BASE_ADDR</a>.</p>

<p>Referenced by <a class="el" href="rng__driver_8c-source.html#l00187">OS_DEV_INIT()</a>.</p>

</div>
</div><p>
<a class="anchor" name="ccc08d1856ab37a1d9bafbb5b9ed7e16"></a><!-- doxytag: member="rng_driver.c::rng_setup_interrupt_handling" ref="ccc08d1856ab37a1d9bafbb5b9ed7e16" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="portable__os_8h.html#5bea54bf8ff6cfca0e16593c776a898d">os_error_code</a> rng_setup_interrupt_handling           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Register rng_irq() as the interrupt handler for INT_RNG.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>OS_ERROR_OK_S on success, os_error_code on failure </dd></dl>

<p>References <a class="el" href="group__drref.html#gea25b773d0950ddc8187ad72c89b6a1c">OS_DEV_ISR_REF()</a>, <a class="el" href="portable__os_8h-source.html#l00242">OS_ERROR_OK_S</a>, <a class="el" href="group__dkops.html#gc4ea068622ba476068356af1e5a366be">os_register_interrupt()</a>, <a class="el" href="rng__internals_8h-source.html#l00196">RNG_DRIVER_NAME</a>, <a class="el" href="rng__driver_8c-source.html#l00111">rng_irq_set</a>, <a class="el" href="rng__internals_8h-source.html#l00626">RNG_UNMASK_ALL_INTERRUPTS</a>, and <a class="el" href="rng__driver_8c-source.html#l00080">TRUE</a>.</p>

<p>Referenced by <a class="el" href="rng__driver_8c-source.html#l00187">OS_DEV_INIT()</a>.</p>

</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="6e0583003a40f2aa88b4260209a6060c"></a><!-- doxytag: member="rng_driver.c::rng_availability" ref="6e0583003a40f2aa88b4260209a6060c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile <a class="el" href="group__rngcompileflags.html#g435adc1ca9d3fa3a01de29de17573921">rng_status_t</a> <a class="el" href="rng__driver_8c.html#6e0583003a40f2aa88b4260209a6060c">rng_availability</a> = RNG_STATUS_INITIAL<code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Internal flag to know whether RNG is in Failed state (and thus many registers are unavailable). If the value ever goes to <a class="el" href="group__rngcompileflags.html#gg92d7f54ca8a32a2890698a432bc93f35e5cae59c6c8a4aedc65ca9658ec07131">RNG_STATUS_FAILED</a>, it will never change. 
<p>Referenced by <a class="el" href="rng__driver_8c-source.html#l00554">fsl_shw_add_entropy()</a>, <a class="el" href="rng__driver_8c-source.html#l00489">fsl_shw_get_random()</a>, <a class="el" href="rng__driver_8c-source.html#l00187">OS_DEV_INIT()</a>, <a class="el" href="rng__driver_8c-source.html#l00811">OS_DEV_ISR()</a>, <a class="el" href="rng__driver_8c-source.html#l00414">rng_cleanup()</a>, and <a class="el" href="rng__driver_8c-source.html#l00943">rng_drain_fifo()</a>.</p>

</div>
</div><p>
<a class="anchor" name="314aa5385e371ba87a8e0d282b751804"></a><!-- doxytag: member="rng_driver.c::rng_base" ref="314aa5385e371ba87a8e0d282b751804" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile void* <a class="el" href="rng__driver_8c.html#314aa5385e371ba87a8e0d282b751804">rng_base</a><code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This is type void* so that a) it cannot directly be dereferenced, and b) pointer arithmetic on it will function for the byte offsets in rng_rnga.h and <a class="el" href="rng__rngc_8h.html">rng_rngc.h</a><p>
rng_base is the location in the iomap where the RNG's registers (and memory) start.<p>
The referenced data is declared volatile so that the compiler will not make any assumptions about the value of registers in the RNG, and thus will always reload the register into CPU memory before using it (i.e. wherever it is referenced in the driver).<p>
This value should only be referenced by the <a class="el" href="group__rngcompileflags.html#gebbf0fa6a81e0b2c827acdc44a440caa">RNG_READ_REGISTER</a> and <a class="el" href="group__rngcompileflags.html#g8dc1f0a28b7d9c3038a0a83f2ba0a0c1">RNG_WRITE_REGISTER</a> macros and their ilk. All dereferences must be 32 bits wide. 
<p>Referenced by <a class="el" href="rng__driver_8c-source.html#l00187">OS_DEV_INIT()</a>, <a class="el" href="rng__driver_8c-source.html#l00387">OS_DEV_SHUTDOWN()</a>, <a class="el" href="rng__driver_8c-source.html#l00414">rng_cleanup()</a>, and <a class="el" href="rng__driver_8c-source.html#l00851">rng_map_RNG_memory()</a>.</p>

</div>
</div><p>
<a class="anchor" name="25e371d72abe01100d7d8d92c522ea39"></a><!-- doxytag: member="rng_driver.c::rng_irq_set" ref="25e371d72abe01100d7d8d92c522ea39" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="rng__driver_8c.html#25e371d72abe01100d7d8d92c522ea39">rng_irq_set</a> = FALSE<code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Flag to say whether interrupt handler has been registered for RNG interrupt 
<p>Referenced by <a class="el" href="rng__driver_8c-source.html#l00414">rng_cleanup()</a>, and <a class="el" href="rng__driver_8c-source.html#l00874">rng_setup_interrupt_handling()</a>.</p>

</div>
</div><p>
<a class="anchor" name="7c20370fdde3c06b84aaa7144498fe49"></a><!-- doxytag: member="rng_driver.c::rng_major" ref="7c20370fdde3c06b84aaa7144498fe49" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="rng__driver_8c.html#7c20370fdde3c06b84aaa7144498fe49">rng_major</a><code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Major number for device driver. 
<p>Referenced by <a class="el" href="rng__driver_8c-source.html#l00187">OS_DEV_INIT()</a>.</p>

</div>
</div><p>
<a class="anchor" name="bac79a0acbcdb4dec001977039d219e8"></a><!-- doxytag: member="rng_driver.c::rng_output_fifo_size" ref="bac79a0acbcdb4dec001977039d219e8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="rng__driver_8c.html#bac79a0acbcdb4dec001977039d219e8">rng_output_fifo_size</a><code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Size of the RNG's OUTPUT_FIFO, in words. Retrieved with <a class="el" href="group__rngcompileflags.html#g8a5ccac9af0a78c20815363af16cf379">RNG_GET_FIFO_SIZE()</a> during driver initialization. 
<p>Referenced by <a class="el" href="rng__driver_8c-source.html#l00904">rng_grab_config_values()</a>.</p>

</div>
</div><p>
<a class="anchor" name="1884508fa39939afc5e600f7767e5a2c"></a><!-- doxytag: member="rng_driver.c::rng_queue_lock" ref="1884508fa39939afc5e600f7767e5a2c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="portable__os_8h.html#a35d1aba68029da3351f918d97ab8e41">os_lock_t</a> <a class="el" href="rng__driver_8c.html#1884508fa39939afc5e600f7767e5a2c">rng_queue_lock</a> = NULL<code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Global lock for the RNG driver. Mainly used for entries on the RNG work queue. 
<p>Referenced by <a class="el" href="rng__driver_8c-source.html#l00187">OS_DEV_INIT()</a>, and <a class="el" href="rng__driver_8c-source.html#l01033">OS_DEV_TASK()</a>.</p>

</div>
</div><p>
<a class="anchor" name="a55b3f4ceed1c279b42df8c890a6ed16"></a><!-- doxytag: member="rng_driver.c::rng_reg_handle" ref="a55b3f4ceed1c279b42df8c890a6ed16" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="portable__os_8h.html#4099620f0c099a877846b3739098b600">os_driver_reg_t</a> <a class="el" href="rng__driver_8c.html#a55b3f4ceed1c279b42df8c890a6ed16">rng_reg_handle</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Registration handle for registering driver with OS. 
<p>Referenced by <a class="el" href="rng__driver_8c-source.html#l00187">OS_DEV_INIT()</a>, and <a class="el" href="rng__driver_8c-source.html#l00387">OS_DEV_SHUTDOWN()</a>.</p>

</div>
</div><p>
<a class="anchor" name="8292109f0f0d507ac8d1d3a9f9e79511"></a><!-- doxytag: member="rng_driver.c::rng_work_queue" ref="8292109f0f0d507ac8d1d3a9f9e79511" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">shw_queue_t <a class="el" href="rng__driver_8c.html#8292109f0f0d507ac8d1d3a9f9e79511">rng_work_queue</a><code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Queue for the RNG task to process. 
<p>Referenced by <a class="el" href="rng__driver_8c-source.html#l00187">OS_DEV_INIT()</a>, and <a class="el" href="rng__internals_8h-source.html#l00251">RNG_ADD_WORK_ENTRY()</a>.</p>

</div>
</div><p>
<a class="anchor" name="1a9491b21c4a157133520f9ba2c5dded"></a><!-- doxytag: member="rng_driver.c::task_started" ref="1a9491b21c4a157133520f9ba2c5dded" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned <a class="el" href="rng__driver_8c.html#1a9491b21c4a157133520f9ba2c5dded">task_started</a> = FALSE<code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Flag to say whether task initialization succeeded. 
<p>Referenced by <a class="el" href="rng__driver_8c-source.html#l00187">OS_DEV_INIT()</a>, and <a class="el" href="rng__driver_8c-source.html#l00414">rng_cleanup()</a>.</p>

</div>
</div><p>
</div>
<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<meta name="GENERATOR" content="Microsoft FrontPage 5.0">
<Title>footer</Title>
</HEAD>
<BODY>
</ul>
</ul>
</ul>
</ul>
<hr size="1">
<table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber1">
  <tr>
    <td width="50%"><small>©&nbsp; Freescale Semiconductor, Inc., 2007.&nbsp; 
    All rights reserved.<br>
    </small><FONT COLOR="#FF0000"><small>Freescale Confidential Proprietary<br>
    </small></FONT><small><FONT COLOR="#FF0000">NDA Required</FONT></small></td>
    <td width="50%"><small>
<a href="http://www.doxygen.org/index.html">
<img src="Freescale25.png" alt="doxygen" align="right" border="0" width="129" height="48"></a></small></td>
  </tr>
</table>
<address style="align: right;">&nbsp;</address>
</body>
</html>
