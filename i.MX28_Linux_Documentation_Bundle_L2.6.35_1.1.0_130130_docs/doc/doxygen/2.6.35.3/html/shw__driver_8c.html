<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>MXC Linux BSP: linux/drivers/mxc/security/rng/shw_driver.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="contents">
<h1>linux/drivers/mxc/security/rng/shw_driver.c File Reference</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="shw__driver_8c.html#a93f0eb578d23995850d61f7d61c55c1">FALSE</a>&nbsp;&nbsp;&nbsp;0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="shw__driver_8c.html#a8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="shw__driver_8c.html#18f8d746fc68a8b0c1e55bd092742255">OS_DEV_INIT</a> (shw_init)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="shw__driver_8c.html#eb443e868ad1bb3a8ecde34a3e7f61f0">OS_DEV_SHUTDOWN</a> (shw_shutdown)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="shw__driver_8c.html#0edf2e3738b6affb4871c26943109f39">shw_cleanup</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="shw__driver_8c.html#1f54af515632d72bd91be40b4c4ad158">OS_DEV_OPEN</a> (shw_open)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="shw__driver_8c.html#e4ebc445580e3f701ae408210aa8b089">OS_DEV_IOCTL</a> (shw_ioctl)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="shw__driver_8c.html#533639581b75559d4d6ed2aca5f163d4">OS_DEV_MMAP</a> (shw_mmap)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="shw__driver_8c.html#c5cd9f143d801d1891d939caadc8ebf6">OS_DEV_CLOSE</a> (shw_release)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="shw__driver_8c.html#348bc146178495456e90bbfe0120d231">shw_user_callback</a> (<a class="el" href="structfsl__shw__uco__t.html">fsl_shw_uco_t</a> *user_ctx)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="portable__os_8h.html#5bea54bf8ff6cfca0e16593c776a898d">os_error_code</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="shw__driver_8c.html#8ff9c752798ab0520eb7d45e9ea6fa0e">shw_setup_user_driver_interaction</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="portable__os_8h.html#5bea54bf8ff6cfca0e16593c776a898d">os_error_code</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="shw__driver_8c.html#57887a4cba6ce5386b23fb297ef88cd3">init_uco</a> (<a class="el" href="structfsl__shw__uco__t.html">fsl_shw_uco_t</a> *user_ctx, void *user_mode_uco)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="shw__driver_8c.html#af99131e5949389a8ecc0bc8c87aa7e3">copy_array</a> (void *userloc, void *userend, void *data_start, unsigned element_size, unsigned element_count)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="portable__os_8h.html#5bea54bf8ff6cfca0e16593c776a898d">os_error_code</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="shw__driver_8c.html#cea038b6a6140d831111d2ffaafc745a">copy_fsl_code</a> (void *user_header, <a class="el" href="shw__driver_8h.html#4d2b660905d31e2f8d24ad6f13150b35">fsl_shw_return_t</a> result_code)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="portable__os_8h.html#5bea54bf8ff6cfca0e16593c776a898d">os_error_code</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="shw__driver_8c.html#ad62d6f749b9ab6642f6134e9e33aabf">get_capabilities</a> (<a class="el" href="structfsl__shw__uco__t.html">fsl_shw_uco_t</a> *user_ctx, void *user_mode_pco_request)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="portable__os_8h.html#5bea54bf8ff6cfca0e16593c776a898d">os_error_code</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="shw__driver_8c.html#5ceb44720e6c49929c2e291955884b5e">get_results</a> (<a class="el" href="structfsl__shw__uco__t.html">fsl_shw_uco_t</a> *user_ctx, void *user_mode_results_req)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="shw__driver_8c.html#2fcdf58fa1e37498c94ba388acf80ad2">process_hdr</a> (<a class="el" href="structfsl__shw__uco__t.html">fsl_shw_uco_t</a> *user_ctx, struct shw_req_header *hdr)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="portable__os_8h.html#5bea54bf8ff6cfca0e16593c776a898d">os_error_code</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="shw__driver_8c.html#deb73d2573226675553963483d77951a">get_random</a> (<a class="el" href="structfsl__shw__uco__t.html">fsl_shw_uco_t</a> *user_ctx, void *user_mode_get_random_req)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="portable__os_8h.html#5bea54bf8ff6cfca0e16593c776a898d">os_error_code</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="shw__driver_8c.html#ff84a1d96013fe0c198a66696618a712">add_entropy</a> (<a class="el" href="structfsl__shw__uco__t.html">fsl_shw_uco_t</a> *user_ctx, void *user_mode_add_entropy_req)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="shw__driver_8h.html#4d2b660905d31e2f8d24ad6f13150b35">fsl_shw_return_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__miscfuns.html#g67f5e2ba19ec054ff6d103530cdab73c">fsl_shw_register_user</a> (<a class="el" href="structfsl__shw__uco__t.html">fsl_shw_uco_t</a> *user_ctx)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="shw__driver_8h.html#4d2b660905d31e2f8d24ad6f13150b35">fsl_shw_return_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__miscfuns.html#g19a3609c45c565850fc7cbcc1fe880aa">fsl_shw_deregister_user</a> (<a class="el" href="structfsl__shw__uco__t.html">fsl_shw_uco_t</a> *user_ctx)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structfsl__shw__pco__t.html">fsl_shw_pco_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__miscfuns.html#g3f5241fea6e98432445422737a23305c">fsl_shw_get_capabilities</a> (<a class="el" href="structfsl__shw__uco__t.html">fsl_shw_uco_t</a> *user_ctx)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="shw__driver_8h.html#4d2b660905d31e2f8d24ad6f13150b35">fsl_shw_return_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__opfuns.html#g2aba93b3238c1ead9a1e3fc5f4f2d619">fsl_shw_get_random</a> (<a class="el" href="structfsl__shw__uco__t.html">fsl_shw_uco_t</a> *user_ctx, uint32_t length, uint8_t *data)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="shw__driver_8h.html#4d2b660905d31e2f8d24ad6f13150b35">fsl_shw_return_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__opfuns.html#g80cd0b9ba062845ef4eeac5413a0d579">fsl_shw_add_entropy</a> (<a class="el" href="structfsl__shw__uco__t.html">fsl_shw_uco_t</a> *user_ctx, uint32_t length, uint8_t *data)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="shw__driver_8h.html#4d2b660905d31e2f8d24ad6f13150b35">fsl_shw_return_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__opfuns.html#ga9092309757f63584e6d05b133c5ef6c">fsl_shw_hash</a> (<a class="el" href="structfsl__shw__uco__t.html">fsl_shw_uco_t</a> *user_ctx, <a class="el" href="structfsl__shw__hco__t.html">fsl_shw_hco_t</a> *hash_ctx, const uint8_t *msg, uint32_t length, uint8_t *result, uint32_t result_len)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="shw__driver_8h.html#4d2b660905d31e2f8d24ad6f13150b35">fsl_shw_return_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__opfuns.html#g68cfe8ee1d53a1759e961416ea74656d">fsl_shw_hmac_precompute</a> (<a class="el" href="structfsl__shw__uco__t.html">fsl_shw_uco_t</a> *user_ctx, <a class="el" href="structfsl__shw__sko__t.html">fsl_shw_sko_t</a> *key_info, <a class="el" href="structfsl__shw__hmco__t.html">fsl_shw_hmco_t</a> *hmac_ctx)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="shw__driver_8h.html#4d2b660905d31e2f8d24ad6f13150b35">fsl_shw_return_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__opfuns.html#gac83e16693bcfba44b4f7669c17c8e5a">fsl_shw_hmac</a> (<a class="el" href="structfsl__shw__uco__t.html">fsl_shw_uco_t</a> *user_ctx, <a class="el" href="structfsl__shw__sko__t.html">fsl_shw_sko_t</a> *key_info, <a class="el" href="structfsl__shw__hmco__t.html">fsl_shw_hmco_t</a> *hmac_ctx, const uint8_t *msg, uint32_t length, uint8_t *result, uint32_t result_len)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="shw__driver_8h.html#4d2b660905d31e2f8d24ad6f13150b35">fsl_shw_return_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__miscfuns.html#g84384daf241bc45c50831ab80a4493e9">do_scc_encrypt_region</a> (<a class="el" href="structfsl__shw__uco__t.html">fsl_shw_uco_t</a> *user_ctx, void *partition_base, uint32_t offset_bytes, uint32_t byte_count, uint8_t *black_data, uint32_t *IV, <a class="el" href="shw__driver_8h.html#9532c5e1bbd9e34b50fa40ac1d914bf0">fsl_shw_cypher_mode_t</a> cypher_mode)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="shw__driver_8h.html#4d2b660905d31e2f8d24ad6f13150b35">fsl_shw_return_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__miscfuns.html#g7792ff454e6583aa6973d0c63b039d59">do_scc_decrypt_region</a> (<a class="el" href="structfsl__shw__uco__t.html">fsl_shw_uco_t</a> *user_ctx, void *partition_base, uint32_t offset_bytes, uint32_t byte_count, const uint8_t *black_data, uint32_t *IV, <a class="el" href="shw__driver_8h.html#9532c5e1bbd9e34b50fa40ac1d914bf0">fsl_shw_cypher_mode_t</a> cypher_mode)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__miscfuns.html#gb4c9ca955c5851d6f19a43f1f075beb4">fsl_shw_smalloc</a> (<a class="el" href="structfsl__shw__uco__t.html">fsl_shw_uco_t</a> *user_ctx, uint32_t size, const uint8_t *UMID, uint32_t permissions)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="shw__driver_8h.html#4d2b660905d31e2f8d24ad6f13150b35">fsl_shw_return_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__miscfuns.html#g783bdf3c67f51c73d310c0a36f9d59b8">fsl_shw_sfree</a> (<a class="el" href="structfsl__shw__uco__t.html">fsl_shw_uco_t</a> *user_ctx, void *address)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="shw__driver_8h.html#4d2b660905d31e2f8d24ad6f13150b35">fsl_shw_return_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__miscfuns.html#g56b43cf25153b4aa1b73e8c8bbb0715b">fsl_shw_diminish_perms</a> (<a class="el" href="structfsl__shw__uco__t.html">fsl_shw_uco_t</a> *user_ctx, void *address, uint32_t permissions)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="shw__driver_8h.html#4d2b660905d31e2f8d24ad6f13150b35">fsl_shw_return_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__opfuns.html#g7e450fe979f833b3cc4da2c85c24b26e">fsl_shw_gen_encrypt</a> (<a class="el" href="structfsl__shw__uco__t.html">fsl_shw_uco_t</a> *user_ctx, <a class="el" href="structfsl__shw__acco__t.html">fsl_shw_acco_t</a> *auth_ctx, <a class="el" href="structfsl__shw__sko__t.html">fsl_shw_sko_t</a> *cipher_key_info, <a class="el" href="structfsl__shw__sko__t.html">fsl_shw_sko_t</a> *auth_key_info, uint32_t auth_data_length, const uint8_t *auth_data, uint32_t payload_length, const uint8_t *payload, uint8_t *ct, uint8_t *auth_value)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="shw__driver_8h.html#4d2b660905d31e2f8d24ad6f13150b35">fsl_shw_return_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__opfuns.html#g8d0b815bbd579551a2f9be604474e474">fsl_shw_auth_decrypt</a> (<a class="el" href="structfsl__shw__uco__t.html">fsl_shw_uco_t</a> *user_ctx, <a class="el" href="structfsl__shw__acco__t.html">fsl_shw_acco_t</a> *auth_ctx, <a class="el" href="structfsl__shw__sko__t.html">fsl_shw_sko_t</a> *cipher_key_info, <a class="el" href="structfsl__shw__sko__t.html">fsl_shw_sko_t</a> *auth_key_info, uint32_t auth_data_length, const uint8_t *auth_data, uint32_t payload_length, const uint8_t *ct, const uint8_t *auth_value, uint8_t *payload)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="shw__driver_8h.html#4d2b660905d31e2f8d24ad6f13150b35">fsl_shw_return_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__opfuns.html#g682a9e7bbd26f3b0730f6f2d3cc49120">fsl_shw_gen_random_pf_key</a> (<a class="el" href="structfsl__shw__uco__t.html">fsl_shw_uco_t</a> *user_ctx)</td></tr>

<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="shw__driver_8c.html#18353a5d4bdd8674b217a95ed2d67f6e">shw_major_node</a> = SHW_MAJOR_NODE</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="shw__driver_8c.html#9f20a71b974cce4e894e4edf5c31dd82">shw_device_registered</a> = 0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="portable__os_8h.html#4099620f0c099a877846b3739098b600">os_driver_reg_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="shw__driver_8c.html#d896d083f5b24e968590761df529d4b0">reg_handle</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structfsl__shw__uco__t.html">fsl_shw_uco_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="shw__driver_8c.html#a06eca2019a7da306a9eaa099fdbab66">user_list</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="portable__os_8h.html#a35d1aba68029da3351f918d97ab8e41">os_lock_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="shw__driver_8c.html#422c36a5224da931d5383e5cbc8c9a31">shw_queue_lock</a> = NULL</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="shw__driver_8h.html#c46f52e5d57ee8d61b4b649425bb1933">fsl_shw_key_alg_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="shw__driver_8c.html#bf5a5b87425adb0fbc5b27f72a68d060">pf_syms</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="shw__driver_8h.html#a341b62ad687f35db7848cb1f85c46a7">fsl_shw_sym_mode_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="shw__driver_8c.html#85b1ed86e46a63020f6d1c3a8ff88070">pf_modes</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="shw__driver_8h.html#18390075437c28726003935a7be1d81b">fsl_shw_hash_alg_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="shw__driver_8c.html#9a380dc5264f481af8df801a04da42f2">pf_hashes</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="structfsl__shw__pco__t.html">fsl_shw_pco_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="shw__driver_8c.html#57fc111cb1def09fd65940bf77b00966">cap</a></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
This is the user-mode driver code for the FSL Security Hardware (SHW) API. as well as the 'common' FSL SHW API code for kernel API users.<p>
Its interaction with the Linux kernel is from calls to shw_init() when the driver is loaded, and shw_shutdown() should the driver be unloaded.<p>
The User API (driver interface) is handled by the following functions: <ul>
<li>shw_open() - handles open() system call on FSL SHW device </li>
<li>shw_release() - handles close() system call on FSL SHW device </li>
<li>shw_ioctl() - handles ioctl() system call on FSL SHW device</li>
</ul>
The driver also provides the following functions for kernel users of the FSL SHW API: <ul>
<li><a class="el" href="shw__driver_8h.html#g67f5e2ba19ec054ff6d103530cdab73c">fsl_shw_register_user()</a> </li>
<li><a class="el" href="shw__driver_8h.html#g19a3609c45c565850fc7cbcc1fe880aa">fsl_shw_deregister_user()</a> </li>
<li><a class="el" href="shw__driver_8h.html#g3f5241fea6e98432445422737a23305c">fsl_shw_get_capabilities()</a> </li>
<li><a class="el" href="shw__driver_8h.html#g970a626e32487a4cc292458de0dd9a59">fsl_shw_get_results()</a></li>
</ul>
All other functions are internal to the driver.<p>
The life of the driver starts at boot (or module load) time, with a call by the kernel to shw_init().<p>
The life of the driver ends when the kernel is shutting down (or the driver is being unloaded). At this time, shw_shutdown() is called. No function will ever be called after that point.<p>
In the case that the driver is reloaded, a new copy of the driver, with fresh global values, etc., is loaded, and there will be a new call to shw_init().<p>
In user mode, the user's <a class="el" href="shw__driver_8h.html#g67f5e2ba19ec054ff6d103530cdab73c">fsl_shw_register_user()</a> call causes an open() event on the driver followed by a ioctl() with the registration information. Any subsequent API calls by the user are handled through the ioctl() function and shuffled off to the appropriate routine (or driver) for service. The <a class="el" href="shw__driver_8h.html#g19a3609c45c565850fc7cbcc1fe880aa">fsl_shw_deregister_user()</a> call by the user results in a close() function call on the driver.<p>
In kernel mode, the driver provides the functions <a class="el" href="shw__driver_8h.html#g67f5e2ba19ec054ff6d103530cdab73c">fsl_shw_register_user()</a>, <a class="el" href="shw__driver_8h.html#g19a3609c45c565850fc7cbcc1fe880aa">fsl_shw_deregister_user()</a>, <a class="el" href="shw__driver_8h.html#g3f5241fea6e98432445422737a23305c">fsl_shw_get_capabilities()</a>, and <a class="el" href="shw__driver_8h.html#g970a626e32487a4cc292458de0dd9a59">fsl_shw_get_results()</a>. Other parts of the API are provided by other drivers, if available, to support the cryptographic functions. <hr><h2>Define Documentation</h2>
<a class="anchor" name="a93f0eb578d23995850d61f7d61c55c1"></a><!-- doxytag: member="shw_driver.c::FALSE" ref="a93f0eb578d23995850d61f7d61c55c1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FALSE&nbsp;&nbsp;&nbsp;0          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Not true. Guaranteed to be zero. 
</div>
</div><p>
<a class="anchor" name="a8cecfc5c5c054d2875c03e77b7be15d"></a><!-- doxytag: member="shw_driver.c::TRUE" ref="a8cecfc5c5c054d2875c03e77b7be15d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRUE&nbsp;&nbsp;&nbsp;1          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
True. Guaranteed to be non-zero. 
</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="ff84a1d96013fe0c198a66696618a712"></a><!-- doxytag: member="shw_driver.c::add_entropy" ref="ff84a1d96013fe0c198a66696618a712" args="(fsl_shw_uco_t *user_ctx, void *user_mode_add_entropy_req)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="portable__os_8h.html#5bea54bf8ff6cfca0e16593c776a898d">os_error_code</a> add_entropy           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsl__shw__uco__t.html">fsl_shw_uco_t</a> *&nbsp;</td>
          <td class="paramname"> <em>user_ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>user_mode_add_entropy_req</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Handle user-mode Add Entropy request<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>user_ctx</em>&nbsp;</td><td>Pointer to the kernel version of user's context </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>user_mode_add_entropy_req</em>&nbsp;</td><td>Address of user-space request</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>an os_error_code </dd></dl>

<p>References <a class="el" href="shw__driver_8c-source.html#l00930">copy_fsl_code()</a>, <a class="el" href="rng_2fsl__shw__rand_8c-source.html#l00112">fsl_shw_add_entropy()</a>, <a class="el" href="group__dkops.html#gbb713c70ffb5c864c9470e6f1711d6a6">os_alloc_memory()</a>, <a class="el" href="group__dkops.html#g15f39c7291cd7162f1afad7301e93dac">os_copy_from_user()</a>, <a class="el" href="portable__os_8h-source.html#l00242">OS_ERROR_OK_S</a>, and <a class="el" href="group__dkops.html#gcda51a54b44ce0788a295d92faa917de">os_free_memory()</a>.</p>

<p>Referenced by <a class="el" href="shw__driver_8c-source.html#l00399">OS_DEV_IOCTL()</a>.</p>

</div>
</div><p>
<a class="anchor" name="af99131e5949389a8ecc0bc8c87aa7e3"></a><!-- doxytag: member="shw_driver.c::copy_array" ref="af99131e5949389a8ecc0bc8c87aa7e3" args="(void *userloc, void *userend, void *data_start, unsigned element_size, unsigned element_count)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void* copy_array           </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>userloc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>userend</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data_start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>element_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>element_count</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Copy array from kernel to user space.<p>
This routine will check bounds before trying to copy, and return failure on bounds violation or error during the copy.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>userloc</em>&nbsp;</td><td>Location in userloc to place data. If NULL, the function will do nothing (except return NULL). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>userend</em>&nbsp;</td><td>Address beyond allowed copy region at <code>userloc</code>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data_start</em>&nbsp;</td><td>Location of data to be copied </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>element_size</em>&nbsp;</td><td>sizeof() an element </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>element_count</em>&nbsp;</td><td>Number of elements of size element_size to copy. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>New value of userloc, or NULL if there was an error. </dd></dl>

<p>References <a class="el" href="portable__os_8h-source.html#l00242">OS_ERROR_OK_S</a>.</p>

<p>Referenced by <a class="el" href="shw__driver_8c-source.html#l01305">get_capabilities()</a>.</p>

</div>
</div><p>
<a class="anchor" name="cea038b6a6140d831111d2ffaafc745a"></a><!-- doxytag: member="shw_driver.c::copy_fsl_code" ref="cea038b6a6140d831111d2ffaafc745a" args="(void *user_header, fsl_shw_return_t result_code)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="portable__os_8h.html#5bea54bf8ff6cfca0e16593c776a898d">os_error_code</a> copy_fsl_code           </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>user_header</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="shw__driver_8h.html#4d2b660905d31e2f8d24ad6f13150b35">fsl_shw_return_t</a>&nbsp;</td>
          <td class="paramname"> <em>result_code</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Send an FSL SHW API return code up into the user-space request structure.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>user_header</em>&nbsp;</td><td>User address of request block / request header </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>result_code</em>&nbsp;</td><td>The FSL SHW API code to be placed at header.code</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>an os_error_code</dd></dl>
NOTE: This function assumes that the shw_req_header is at the beginning of each request structure. 
<p>References <a class="el" href="group__dkops.html#g1dc2eba81acedb6ec16595589433e53f">os_copy_to_user()</a>.</p>

<p>Referenced by <a class="el" href="shw__driver_8c-source.html#l01515">add_entropy()</a>, <a class="el" href="shw__driver_8c-source.html#l01305">get_capabilities()</a>, <a class="el" href="shw__driver_8c-source.html#l01478">get_random()</a>, and <a class="el" href="shw__driver_8c-source.html#l01401">get_results()</a>.</p>

</div>
</div><p>
<a class="anchor" name="ad62d6f749b9ab6642f6134e9e33aabf"></a><!-- doxytag: member="shw_driver.c::get_capabilities" ref="ad62d6f749b9ab6642f6134e9e33aabf" args="(fsl_shw_uco_t *user_ctx, void *user_mode_pco_request)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="portable__os_8h.html#5bea54bf8ff6cfca0e16593c776a898d">os_error_code</a> get_capabilities           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsl__shw__uco__t.html">fsl_shw_uco_t</a> *&nbsp;</td>
          <td class="paramname"> <em>user_ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>user_mode_pco_request</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Handle user-mode Get Capabilities request<p>
Right now, this function can only have a failure if the user has failed to provide a pointer to a location in user space with enough room to hold the <a class="el" href="structfsl__shw__pco__t.html" title="Platform Capability Object.">fsl_shw_pco_t</a> structure and any associated data. It will treat this failure as an ioctl failure and return an ioctl error code, instead of treating it as an API failure.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>user_ctx</em>&nbsp;</td><td>The kernel version of user's context </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>user_mode_pco_request</em>&nbsp;</td><td>Pointer to user-space request</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>an os_error_code </dd></dl>

<p>References <a class="el" href="shw__driver_8c-source.html#l00903">copy_array()</a>, <a class="el" href="shw__driver_8c-source.html#l00930">copy_fsl_code()</a>, <a class="el" href="shw__driver_8h-source.html#l00157">FSL_RETURN_OK_S</a>, <a class="el" href="shw__driver_8h-source.html#l00764">fsl_shw_pco_t::hash_algorithm_count</a>, <a class="el" href="shw__driver_8h-source.html#l00765">fsl_shw_pco_t::hash_algorithms</a>, <a class="el" href="group__dkops.html#g15f39c7291cd7162f1afad7301e93dac">os_copy_from_user()</a>, <a class="el" href="group__dkops.html#g1dc2eba81acedb6ec16595589433e53f">os_copy_to_user()</a>, <a class="el" href="portable__os_8h-source.html#l00245">OS_ERROR_BAD_ADDRESS_S</a>, <a class="el" href="portable__os_8h-source.html#l00242">OS_ERROR_OK_S</a>, <a class="el" href="shw__driver_8h-source.html#l00760">fsl_shw_pco_t::sym_algorithm_count</a>, <a class="el" href="shw__driver_8h-source.html#l00761">fsl_shw_pco_t::sym_algorithms</a>, <a class="el" href="shw__driver_8h-source.html#l00762">fsl_shw_pco_t::sym_mode_count</a>, and <a class="el" href="shw__driver_8h-source.html#l00763">fsl_shw_pco_t::sym_modes</a>.</p>

<p>Referenced by <a class="el" href="fsl__shw__user_8c-source.html#l00055">fsl_shw_get_capabilities()</a>, and <a class="el" href="shw__driver_8c-source.html#l00399">OS_DEV_IOCTL()</a>.</p>

</div>
</div><p>
<a class="anchor" name="deb73d2573226675553963483d77951a"></a><!-- doxytag: member="shw_driver.c::get_random" ref="deb73d2573226675553963483d77951a" args="(fsl_shw_uco_t *user_ctx, void *user_mode_get_random_req)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="portable__os_8h.html#5bea54bf8ff6cfca0e16593c776a898d">os_error_code</a> get_random           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsl__shw__uco__t.html">fsl_shw_uco_t</a> *&nbsp;</td>
          <td class="paramname"> <em>user_ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>user_mode_get_random_req</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Handle user-mode Get Random request<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>user_ctx</em>&nbsp;</td><td>The kernel version of user's context </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>user_mode_get_random_req</em>&nbsp;</td><td>Pointer to user-space request</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>an os_error_code </dd></dl>

<p>References <a class="el" href="shw__driver_8c-source.html#l00930">copy_fsl_code()</a>, <a class="el" href="rng_2fsl__shw__rand_8c-source.html#l00101">fsl_shw_get_random()</a>, <a class="el" href="shw__driver_8h-source.html#l00114">FSL_UCO_BLOCKING_MODE</a>, <a class="el" href="group__dkops.html#g15f39c7291cd7162f1afad7301e93dac">os_copy_from_user()</a>, <a class="el" href="portable__os_8h-source.html#l00242">OS_ERROR_OK_S</a>, and <a class="el" href="shw__driver_8c-source.html#l01460">process_hdr()</a>.</p>

<p>Referenced by <a class="el" href="shw__driver_8c-source.html#l00399">OS_DEV_IOCTL()</a>.</p>

</div>
</div><p>
<a class="anchor" name="5ceb44720e6c49929c2e291955884b5e"></a><!-- doxytag: member="shw_driver.c::get_results" ref="5ceb44720e6c49929c2e291955884b5e" args="(fsl_shw_uco_t *user_ctx, void *user_mode_results_req)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="portable__os_8h.html#5bea54bf8ff6cfca0e16593c776a898d">os_error_code</a> get_results           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsl__shw__uco__t.html">fsl_shw_uco_t</a> *&nbsp;</td>
          <td class="paramname"> <em>user_ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>user_mode_results_req</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Handle user-mode Get Results request<p>
Get arguments from user space into kernel space, then call fsl_shw_get_results, and then copy its return code and any results from kernel space back to user space.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>user_ctx</em>&nbsp;</td><td>The kernel version of user's context </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>user_mode_results_req</em>&nbsp;</td><td>Pointer to user-space request</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>an os_error_code </dd></dl>

<p>References <a class="el" href="shw__driver_8c-source.html#l00930">copy_fsl_code()</a>, <a class="el" href="shw__driver_8h-source.html#l00157">FSL_RETURN_OK_S</a>, <a class="el" href="shw__driver_8c-source.html#l01679">fsl_shw_get_results()</a>, <a class="el" href="group__dkops.html#gbb713c70ffb5c864c9470e6f1711d6a6">os_alloc_memory()</a>, <a class="el" href="group__dkops.html#g15f39c7291cd7162f1afad7301e93dac">os_copy_from_user()</a>, <a class="el" href="group__dkops.html#g1dc2eba81acedb6ec16595589433e53f">os_copy_to_user()</a>, <a class="el" href="portable__os_8h-source.html#l00244">OS_ERROR_NO_MEMORY_S</a>, <a class="el" href="portable__os_8h-source.html#l00242">OS_ERROR_OK_S</a>, and <a class="el" href="group__dkops.html#gcda51a54b44ce0788a295d92faa917de">os_free_memory()</a>.</p>

<p>Referenced by <a class="el" href="shw__driver_8c-source.html#l00399">OS_DEV_IOCTL()</a>.</p>

</div>
</div><p>
<a class="anchor" name="57887a4cba6ce5386b23fb297ef88cd3"></a><!-- doxytag: member="shw_driver.c::init_uco" ref="57887a4cba6ce5386b23fb297ef88cd3" args="(fsl_shw_uco_t *user_ctx, void *user_mode_uco)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="portable__os_8h.html#5bea54bf8ff6cfca0e16593c776a898d">os_error_code</a> init_uco           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsl__shw__uco__t.html">fsl_shw_uco_t</a> *&nbsp;</td>
          <td class="paramname"> <em>user_ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>user_mode_uco</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initialze kernel User Context Object from User-space version.<p>
Copy user UCO into kernel UCO, set flags and fields for operation within kernel space. Add user to driver's list of users.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>user_ctx</em>&nbsp;</td><td>Pointer to kernel space UCO </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>user_mode_uco</em>&nbsp;</td><td>User pointer to user space version</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>os_error_code </dd></dl>

<p>References <a class="el" href="group__lnkflags.html#g0a9e68b33b76b4c230cf6a6a88321cbf">fsl_shw_uco_t::callback</a>, <a class="el" href="shw__driver_8h-source.html#l00669">fsl_shw_uco_t::flags</a>, <a class="el" href="shw__driver_8h-source.html#l00140">FSL_UCO_USERMODE_USER</a>, <a class="el" href="group__dkops.html#g15f39c7291cd7162f1afad7301e93dac">os_copy_from_user()</a>, <a class="el" href="portable__os_8h-source.html#l00242">OS_ERROR_OK_S</a>, <a class="el" href="group__dkops.html#g70b1d88921c338d1ebdb64267ac98624">os_get_process_handle()</a>, <a class="el" href="shw__internals_8h-source.html#l00093">SHW_ADD_USER()</a>, and <a class="el" href="shw__driver_8c-source.html#l00798">shw_user_callback()</a>.</p>

<p>Referenced by <a class="el" href="shw__driver_8c-source.html#l00399">OS_DEV_IOCTL()</a>.</p>

</div>
</div><p>
<a class="anchor" name="c5cd9f143d801d1891d939caadc8ebf6"></a><!-- doxytag: member="shw_driver.c::OS_DEV_CLOSE" ref="c5cd9f143d801d1891d939caadc8ebf6" args="(shw_release)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OS_DEV_CLOSE           </td>
          <td>(</td>
          <td class="paramtype">shw_release&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Handle <code>close()</code> call from user. This is a Linux device driver interface routine.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>OS_ERROR_OK_S on success (always!) </dd></dl>

<p>References <a class="el" href="shw__driver_8c-source.html#l01595">fsl_shw_deregister_user()</a>, <a class="el" href="group__retfns.html#gbcb80e19db489f13e60421841cc84d19">os_dev_close_return()</a>, <a class="el" href="group__drsigargs.html#g935fef0cedacb4b0f68e7d056a504e17">os_dev_get_user_private()</a>, <a class="el" href="group__drsigargs.html#gb2b4ec0fef3278ae64679d3646bbd813">os_dev_set_user_private()</a>, <a class="el" href="portable__os_8h-source.html#l00242">OS_ERROR_OK_S</a>, and <a class="el" href="group__dkops.html#gcda51a54b44ce0788a295d92faa917de">os_free_memory()</a>.</p>

</div>
</div><p>
<a class="anchor" name="18f8d746fc68a8b0c1e55bd092742255"></a><!-- doxytag: member="shw_driver.c::OS_DEV_INIT" ref="18f8d746fc68a8b0c1e55bd092742255" args="(shw_init)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OS_DEV_INIT           </td>
          <td>(</td>
          <td class="paramtype">shw_init&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initialize the driver.<p>
This routine is called during kernel init or module load (insmod).<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>OS_ERROR_OK_S on success, errno on failure </dd></dl>

<p>References <a class="el" href="mxc__scc__driver_8h-source.html#l00174">scc_config_t::black_ram_size_blocks</a>, <a class="el" href="mxc__scc2__driver_8h-source.html#l00182">scc_config_t::block_size_bytes</a>, <a class="el" href="shw__driver_8h-source.html#l00772">fsl_shw_pco_t::block_size_bytes</a>, <a class="el" href="mxc__scc2__driver_8h-source.html#l00174">scc_config_t::driver_major_version</a>, <a class="el" href="mxc__scc2__driver_8h-source.html#l00176">scc_config_t::driver_minor_version</a>, <a class="el" href="shw__driver_8h-source.html#l00157">FSL_RETURN_OK_S</a>, <a class="el" href="fsl__shw__keystore_8c-source.html#l00445">fsl_shw_establish_keystore()</a>, <a class="el" href="fsl__shw__keystore_8c-source.html#l00441">fsl_shw_init_keystore_default()</a>, <a class="el" href="group__retfns.html#gfadc5345f93845736be4d7f8bb239a05">os_dev_init_return()</a>, <a class="el" href="portable__os_8h-source.html#l00243">OS_ERROR_FAIL_S</a>, <a class="el" href="portable__os_8h-source.html#l00244">OS_ERROR_NO_MEMORY_S</a>, <a class="el" href="portable__os_8h-source.html#l00242">OS_ERROR_OK_S</a>, <a class="el" href="group__dkops.html#gd4338ff9bdad14659d26d388971e65f9">os_lock_alloc_init()</a>, <a class="el" href="mxc__scc2__driver_8h-source.html#l00185">scc_config_t::partition_count</a>, <a class="el" href="mxc__scc2__driver_8h-source.html#l00183">scc_config_t::partition_size_bytes</a>, <a class="el" href="mxc__scc__driver_8h-source.html#l00175">scc_config_t::red_ram_size_blocks</a>, fsl_shw_pco_t::scc2_info, <a class="el" href="shw__driver_8h-source.html#l00768">fsl_shw_pco_t::scc_driver_major</a>, <a class="el" href="shw__driver_8h-source.html#l00769">fsl_shw_pco_t::scc_driver_minor</a>, fsl_shw_pco_t::scc_info, <a class="el" href="mxc__scc2__driver_8h-source.html#l00178">scc_config_t::scm_version</a>, <a class="el" href="shw__driver_8h-source.html#l00770">fsl_shw_pco_t::scm_version</a>, <a class="el" href="shw__driver_8c-source.html#l00354">shw_cleanup()</a>, <a class="el" href="shw__driver_8c-source.html#l00159">shw_queue_lock</a>, <a class="el" href="shw__driver_8c-source.html#l00820">shw_setup_user_driver_interaction()</a>, <a class="el" href="mxc__scc2__driver_8h-source.html#l00179">scc_config_t::smn_version</a>, <a class="el" href="shw__driver_8h-source.html#l00771">fsl_shw_pco_t::smn_version</a>, and fsl_shw_pco_t::u.</p>

</div>
</div><p>
<a class="anchor" name="e4ebc445580e3f701ae408210aa8b089"></a><!-- doxytag: member="shw_driver.c::OS_DEV_IOCTL" ref="e4ebc445580e3f701ae408210aa8b089" args="(shw_ioctl)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OS_DEV_IOCTL           </td>
          <td>(</td>
          <td class="paramtype">shw_ioctl&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Process an ioctl() request from user-mode API.<p>
This code determines which of the API requests the user has made and then sends the request off to the appropriate function.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>ioctl_return() </dd></dl>

<p>References <a class="el" href="shw__driver_8c-source.html#l01515">add_entropy()</a>, <a class="el" href="shw__driver_8c-source.html#l01305">get_capabilities()</a>, <a class="el" href="shw__driver_8c-source.html#l01478">get_random()</a>, <a class="el" href="shw__driver_8c-source.html#l01401">get_results()</a>, <a class="el" href="shw__driver_8c-source.html#l00868">init_uco()</a>, <a class="el" href="group__dkops.html#gbb713c70ffb5c864c9470e6f1711d6a6">os_alloc_memory()</a>, <a class="el" href="group__drsigargs.html#gfec32683f0d47eee083e1c4a4f8d4637">os_dev_get_ioctl_arg()</a>, <a class="el" href="group__drsigargs.html#g5b09aea0d3144633cefac0f9b4e1b624">os_dev_get_ioctl_op()</a>, <a class="el" href="group__drsigargs.html#g935fef0cedacb4b0f68e7d056a504e17">os_dev_get_user_private()</a>, <a class="el" href="group__retfns.html#g485dbc024bbd21a60006c6411f4d159f">os_dev_ioctl_return()</a>, <a class="el" href="group__drsigargs.html#gb2b4ec0fef3278ae64679d3646bbd813">os_dev_set_user_private()</a>, <a class="el" href="portable__os_8h-source.html#l00243">OS_ERROR_FAIL_S</a>, <a class="el" href="portable__os_8h-source.html#l00244">OS_ERROR_NO_MEMORY_S</a>, <a class="el" href="portable__os_8h-source.html#l00242">OS_ERROR_OK_S</a>, <a class="el" href="group__dkops.html#gcda51a54b44ce0788a295d92faa917de">os_free_memory()</a>, <a class="el" href="shw__driver_8h-source.html#l00044">SHW_IOCTL_REQUEST</a>, <a class="el" href="shw__internals_8h-source.html#l00112">SHW_REMOVE_USER()</a>, <a class="el" href="shw__driver_8h-source.html#l00063">SHW_USER_REQ_ADD_ENTROPY</a>, <a class="el" href="shw__driver_8h-source.html#l00058">SHW_USER_REQ_DEREGISTER_USER</a>, <a class="el" href="shw__driver_8h-source.html#l00064">SHW_USER_REQ_DROP_PERMS</a>, <a class="el" href="shw__driver_8h-source.html#l00061">SHW_USER_REQ_GET_CAPABILITIES</a>, <a class="el" href="shw__driver_8h-source.html#l00062">SHW_USER_REQ_GET_RANDOM</a>, <a class="el" href="shw__driver_8h-source.html#l00059">SHW_USER_REQ_GET_RESULTS</a>, <a class="el" href="shw__driver_8h-source.html#l00057">SHW_USER_REQ_REGISTER_USER</a>, <a class="el" href="shw__driver_8h-source.html#l00071">SHW_USER_REQ_SCC_DECRYPT</a>, <a class="el" href="shw__driver_8h-source.html#l00069">SHW_USER_REQ_SCC_ENCRYPT</a>, <a class="el" href="shw__driver_8h-source.html#l00068">SHW_USER_REQ_SFREE</a>, and <a class="el" href="shw__driver_8h-source.html#l00066">SHW_USER_REQ_SSTATUS</a>.</p>

</div>
</div><p>
<a class="anchor" name="533639581b75559d4d6ed2aca5f163d4"></a><!-- doxytag: member="shw_driver.c::OS_DEV_MMAP" ref="533639581b75559d4d6ed2aca5f163d4" args="(shw_mmap)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OS_DEV_MMAP           </td>
          <td>(</td>
          <td class="paramtype">shw_mmap&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function implements the smalloc() function for userspace programs, by making a call to the SCC2 mmap() function that acquires a region of secure memory on behalf of the user, and then maps it into the users memory space. Currently, the only memory size supported is that of a single SCC2 partition. Requests for other sized memory regions will fail. 
<p>References <a class="el" href="rng__driver_8c-source.html#l00076">FALSE</a>, <a class="el" href="shw__driver_8h-source.html#l00157">FSL_RETURN_OK_S</a>, <a class="el" href="shw__driver_8c-source.html#l01562">fsl_shw_register_user()</a>, <a class="el" href="group__dkops.html#gbb713c70ffb5c864c9470e6f1711d6a6">os_alloc_memory()</a>, <a class="el" href="group__drsigargs.html#g935fef0cedacb4b0f68e7d056a504e17">os_dev_get_user_private()</a>, <a class="el" href="group__drsigargs.html#gb2b4ec0fef3278ae64679d3646bbd813">os_dev_set_user_private()</a>, <a class="el" href="portable__os_8h-source.html#l00246">OS_ERROR_BAD_ARG_S</a>, <a class="el" href="portable__os_8h-source.html#l00243">OS_ERROR_FAIL_S</a>, <a class="el" href="portable__os_8h-source.html#l00244">OS_ERROR_NO_MEMORY_S</a>, <a class="el" href="portable__os_8h-source.html#l00242">OS_ERROR_OK_S</a>, <a class="el" href="mxc__scc2__driver_8h-source.html#l00183">scc_config_t::partition_size_bytes</a>, and <a class="el" href="rng__driver_8c-source.html#l00080">TRUE</a>.</p>

</div>
</div><p>
<a class="anchor" name="1f54af515632d72bd91be40b4c4ad158"></a><!-- doxytag: member="shw_driver.c::OS_DEV_OPEN" ref="1f54af515632d72bd91be40b4c4ad158" args="(shw_open)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OS_DEV_OPEN           </td>
          <td>(</td>
          <td class="paramtype">shw_open&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Handle <code>open()</code> call from user.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>OS_ERROR_OK_S on success (always!) </dd></dl>

<p>References <a class="el" href="group__retfns.html#g05cfbe8bbcf5a4e6b75ba6066019b89d">os_dev_open_return()</a>, <a class="el" href="group__drsigargs.html#gb2b4ec0fef3278ae64679d3646bbd813">os_dev_set_user_private()</a>, and <a class="el" href="portable__os_8h-source.html#l00242">OS_ERROR_OK_S</a>.</p>

</div>
</div><p>
<a class="anchor" name="eb443e868ad1bb3a8ecde34a3e7f61f0"></a><!-- doxytag: member="shw_driver.c::OS_DEV_SHUTDOWN" ref="eb443e868ad1bb3a8ecde34a3e7f61f0" args="(shw_shutdown)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OS_DEV_SHUTDOWN           </td>
          <td>(</td>
          <td class="paramtype">shw_shutdown&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Prepare driver for exit.<p>
This is called during <code>rmmod</code> when the driver is unloading or when the kernel is shutting down.<p>
Calls <a class="el" href="shw__driver_8c.html#0edf2e3738b6affb4871c26943109f39">shw_cleanup()</a> to do all work to undo anything that happened during initialization or while driver was running. 
<p>References <a class="el" href="group__retfns.html#gd55be53a69af69ba1c9b17b413fad0c6">os_dev_shutdown_return()</a>, <a class="el" href="portable__os_8h-source.html#l00242">OS_ERROR_OK_S</a>, and <a class="el" href="shw__driver_8c-source.html#l00354">shw_cleanup()</a>.</p>

</div>
</div><p>
<a class="anchor" name="2fcdf58fa1e37498c94ba388acf80ad2"></a><!-- doxytag: member="shw_driver.c::process_hdr" ref="2fcdf58fa1e37498c94ba388acf80ad2" args="(fsl_shw_uco_t *user_ctx, struct shw_req_header *hdr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void process_hdr           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsl__shw__uco__t.html">fsl_shw_uco_t</a> *&nbsp;</td>
          <td class="paramname"> <em>user_ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct shw_req_header *&nbsp;</td>
          <td class="paramname"> <em>hdr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Process header of user-mode request.<p>
Mark header as User Mode request. Update UCO's flags and reference fields with current versions from the header.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>user_ctx</em>&nbsp;</td><td>Pointer to kernel version of UCO. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hdr</em>&nbsp;</td><td>Pointer to common part of user request.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>void </dd></dl>

<p>References <a class="el" href="shw__driver_8h-source.html#l00669">fsl_shw_uco_t::flags</a>, <a class="el" href="shw__driver_8h-source.html#l00140">FSL_UCO_USERMODE_USER</a>, and <a class="el" href="shw__driver_8h-source.html#l00667">fsl_shw_uco_t::user_ref</a>.</p>

<p>Referenced by <a class="el" href="shw__driver_8c-source.html#l01478">get_random()</a>.</p>

</div>
</div><p>
<a class="anchor" name="0edf2e3738b6affb4871c26943109f39"></a><!-- doxytag: member="shw_driver.c::shw_cleanup" ref="0edf2e3738b6affb4871c26943109f39" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void shw_cleanup           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Prepare driver for shutdown.<p>
Remove the driver registration. 
<p>References <a class="el" href="group__dkops.html#g745130e9c17f4cf2bf12cd94bfc4dfd0">os_driver_remove_registration()</a>, <a class="el" href="group__dkops.html#gf5e20881451160a10c8d3a84daff0424">os_lock_deallocate()</a>, <a class="el" href="shw__driver_8c-source.html#l00148">reg_handle</a>, <a class="el" href="shw__driver_8c-source.html#l00143">shw_device_registered</a>, and <a class="el" href="shw__driver_8c-source.html#l00159">shw_queue_lock</a>.</p>

<p>Referenced by <a class="el" href="shw__driver_8c-source.html#l00242">OS_DEV_INIT()</a>, and <a class="el" href="shw__driver_8c-source.html#l00334">OS_DEV_SHUTDOWN()</a>.</p>

</div>
</div><p>
<a class="anchor" name="8ff9c752798ab0520eb7d45e9ea6fa0e"></a><!-- doxytag: member="shw_driver.c::shw_setup_user_driver_interaction" ref="8ff9c752798ab0520eb7d45e9ea6fa0e" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="portable__os_8h.html#5bea54bf8ff6cfca0e16593c776a898d">os_error_code</a> shw_setup_user_driver_interaction           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Register the driver with the kernel as the driver for shw_major_node. Note that this value may be zero, in which case the major number will be assigned by the OS. shw_major_node is never modified.<p>
The open(), ioctl(), and close() handles for the driver ned to be registered with the kernel. Upon success, shw_device_registered will be true;<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>OS_ERROR_OK_S on success, or an os err code </dd></dl>

<p>References <a class="el" href="group__drref.html#g5e7d4b9482351658e00fcf039371728c">OS_DEV_CLOSE_REF()</a>, <a class="el" href="group__drref.html#g93eb21458eac0f376af8d954a96d0061">OS_DEV_IOCTL_REF()</a>, <a class="el" href="group__drref.html#ge453dc232bda40ca6d7e03f8d89c6e9c">OS_DEV_MMAP_REF()</a>, <a class="el" href="group__drref.html#g75c1f311f36fb11f3430609bd0289d82">OS_DEV_OPEN_REF()</a>, <a class="el" href="group__dkops.html#g746d79bf01506b3b84556cd7fd733cfa">os_driver_add_registration()</a>, <a class="el" href="group__dkops.html#g08371d56a1c9a9d6b6dbcf8d5a080bb3">os_driver_complete_registration()</a>, <a class="el" href="group__dkops.html#gcdcbb1224bfc1d551a972ccef5052d4f">os_driver_get_major()</a>, <a class="el" href="group__dkops.html#gee0e81a853a702de227a8cdc5537470f">os_driver_init_registration()</a>, <a class="el" href="portable__os_8h-source.html#l00242">OS_ERROR_OK_S</a>, <a class="el" href="portable__os_8h-source.html#l00320">OS_FN_CLOSE</a>, <a class="el" href="portable__os_8h-source.html#l00323">OS_FN_IOCTL</a>, <a class="el" href="portable__os_8h-source.html#l00324">OS_FN_MMAP</a>, <a class="el" href="portable__os_8h-source.html#l00319">OS_FN_OPEN</a>, <a class="el" href="shw__driver_8c-source.html#l00148">reg_handle</a>, <a class="el" href="shw__driver_8c-source.html#l00143">shw_device_registered</a>, <a class="el" href="shw__internals_8h-source.html#l00079">SHW_DRIVER_NAME</a>, <a class="el" href="shw__driver_8c-source.html#l00137">shw_major_node</a>, and <a class="el" href="rng__driver_8c-source.html#l00080">TRUE</a>.</p>

<p>Referenced by <a class="el" href="shw__driver_8c-source.html#l00242">OS_DEV_INIT()</a>.</p>

</div>
</div><p>
<a class="anchor" name="348bc146178495456e90bbfe0120d231"></a><!-- doxytag: member="shw_driver.c::shw_user_callback" ref="348bc146178495456e90bbfe0120d231" args="(fsl_shw_uco_t *user_ctx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void shw_user_callback           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsl__shw__uco__t.html">fsl_shw_uco_t</a> *&nbsp;</td>
          <td class="paramname"> <em>user_ctx</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
FSL SHW User callback function.<p>
This function is set in the kernel version of the user context as the callback function when the user mode user wants a callback. Its job is to inform the user process that results (may) be available. It does this by sending a SIGUSR2 signal which is then caught by the user-mode FSL SHW library.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>user_ctx</em>&nbsp;</td><td>Kernel version of uco associated with the request.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>void </dd></dl>

<p>References <a class="el" href="group__dkops.html#g3ae84e4979e6709f3b07bd37cce0f0e6">os_send_signal()</a>.</p>

<p>Referenced by <a class="el" href="shw__driver_8c-source.html#l00868">init_uco()</a>.</p>

</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="57fc111cb1def09fd65940bf77b00966"></a><!-- doxytag: member="shw_driver.c::cap" ref="57fc111cb1def09fd65940bf77b00966" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfsl__shw__pco__t.html">fsl_shw_pco_t</a> <a class="el" href="shw__driver_8c.html#57fc111cb1def09fd65940bf77b00966">cap</a><code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
        1, 3,                   
        2, 3,                   
        <span class="keyword">sizeof</span>(<a class="code" href="shw__driver_8c.html#bf5a5b87425adb0fbc5b27f72a68d060">pf_syms</a>) / <span class="keyword">sizeof</span>(<a class="code" href="shw__driver_8h.html#c46f52e5d57ee8d61b4b649425bb1933">fsl_shw_key_alg_t</a>),    
        <a class="code" href="shw__driver_8c.html#bf5a5b87425adb0fbc5b27f72a68d060">pf_syms</a>,                
        <span class="keyword">sizeof</span>(<a class="code" href="shw__driver_8c.html#85b1ed86e46a63020f6d1c3a8ff88070">pf_modes</a>) / <span class="keyword">sizeof</span>(<a class="code" href="shw__driver_8h.html#a341b62ad687f35db7848cb1f85c46a7">fsl_shw_sym_mode_t</a>),  
        <a class="code" href="shw__driver_8c.html#85b1ed86e46a63020f6d1c3a8ff88070">pf_modes</a>,               
        <span class="keyword">sizeof</span>(<a class="code" href="shw__driver_8c.html#9a380dc5264f481af8df801a04da42f2">pf_hashes</a>) / <span class="keyword">sizeof</span>(<a class="code" href="shw__driver_8h.html#18390075437c28726003935a7be1d81b">fsl_shw_hash_alg_t</a>), 
        <a class="code" href="shw__driver_8c.html#9a380dc5264f481af8df801a04da42f2">pf_hashes</a>,              
        
        {                       
         {0, 0, 0, 0}
         ,                      
         {0, 0, 0, 0}
         ,                      
         {0, 0, 0, 0}
         ,                      




         {0, 0, 0, 0}
         ,                      

         {0, 0, 0, 0}           
         }
        ,
        0, 0,                   
        0, 0, 0,                
        {{0, 0}
         }
        ,                       
}
</pre></div>This matches SHW capabilities... 
<p>Referenced by <a class="el" href="user__wrap_8c-source.html#l00277">run_user_wrap()</a>, and <a class="el" href="wrap_8c-source.html#l00417">run_wrap()</a>.</p>

</div>
</div><p>
<a class="anchor" name="9a380dc5264f481af8df801a04da42f2"></a><!-- doxytag: member="shw_driver.c::pf_hashes" ref="9a380dc5264f481af8df801a04da42f2" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="shw__driver_8h.html#18390075437c28726003935a7be1d81b">fsl_shw_hash_alg_t</a> <a class="el" href="shw__driver_8c.html#9a380dc5264f481af8df801a04da42f2">pf_hashes</a>[]<code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
}
</pre></div>Empty list of supported hash algorithms. 
</div>
</div><p>
<a class="anchor" name="85b1ed86e46a63020f6d1c3a8ff88070"></a><!-- doxytag: member="shw_driver.c::pf_modes" ref="85b1ed86e46a63020f6d1c3a8ff88070" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="shw__driver_8h.html#a341b62ad687f35db7848cb1f85c46a7">fsl_shw_sym_mode_t</a> <a class="el" href="shw__driver_8c.html#85b1ed86e46a63020f6d1c3a8ff88070">pf_modes</a>[]<code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
}
</pre></div>Empty list of supported symmetric modes. 
</div>
</div><p>
<a class="anchor" name="bf5a5b87425adb0fbc5b27f72a68d060"></a><!-- doxytag: member="shw_driver.c::pf_syms" ref="bf5a5b87425adb0fbc5b27f72a68d060" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="shw__driver_8h.html#c46f52e5d57ee8d61b4b649425bb1933">fsl_shw_key_alg_t</a> <a class="el" href="shw__driver_8c.html#bf5a5b87425adb0fbc5b27f72a68d060">pf_syms</a>[]<code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
}
</pre></div>Empty list of supported symmetric algorithms. 
</div>
</div><p>
<a class="anchor" name="d896d083f5b24e968590761df529d4b0"></a><!-- doxytag: member="shw_driver.c::reg_handle" ref="d896d083f5b24e968590761df529d4b0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="portable__os_8h.html#4099620f0c099a877846b3739098b600">os_driver_reg_t</a> <a class="el" href="rng__test__driver_8c.html#d896d083f5b24e968590761df529d4b0">reg_handle</a><code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
OS-dependent handle used for registering user interface of a driver. 
<p>Referenced by <a class="el" href="rng__test__driver_8c-source.html#l00455">OS_DEV_SHUTDOWN()</a>, <a class="el" href="rng__test__driver_8c-source.html#l00411">rng_test_setup_user_driver_interaction()</a>, <a class="el" href="shw__driver_8c-source.html#l00354">shw_cleanup()</a>, and <a class="el" href="shw__driver_8c-source.html#l00820">shw_setup_user_driver_interaction()</a>.</p>

</div>
</div><p>
<a class="anchor" name="9f20a71b974cce4e894e4edf5c31dd82"></a><!-- doxytag: member="shw_driver.c::shw_device_registered" ref="9f20a71b974cce4e894e4edf5c31dd82" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="shw__driver_8c.html#9f20a71b974cce4e894e4edf5c31dd82">shw_device_registered</a> = 0<code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Flag to know whether the driver has been associated with its user device node (e.g. /dev/shw). 
<p>Referenced by <a class="el" href="shw__driver_8c-source.html#l00354">shw_cleanup()</a>, and <a class="el" href="shw__driver_8c-source.html#l00820">shw_setup_user_driver_interaction()</a>.</p>

</div>
</div><p>
<a class="anchor" name="18353a5d4bdd8674b217a95ed2d67f6e"></a><!-- doxytag: member="shw_driver.c::shw_major_node" ref="18353a5d4bdd8674b217a95ed2d67f6e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="shw__driver_8c.html#18353a5d4bdd8674b217a95ed2d67f6e">shw_major_node</a> = SHW_MAJOR_NODE<code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Major node (user/device interaction value) of this driver. 
<p>Referenced by <a class="el" href="shw__driver_8c-source.html#l00820">shw_setup_user_driver_interaction()</a>.</p>

</div>
</div><p>
<a class="anchor" name="422c36a5224da931d5383e5cbc8c9a31"></a><!-- doxytag: member="shw_driver.c::shw_queue_lock" ref="422c36a5224da931d5383e5cbc8c9a31" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="portable__os_8h.html#a35d1aba68029da3351f918d97ab8e41">os_lock_t</a> <a class="el" href="shw__driver_8c.html#422c36a5224da931d5383e5cbc8c9a31">shw_queue_lock</a> = NULL          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This is the lock for all user request pools. H/W component drivers may also use it for their own work queues. 
<p>Referenced by <a class="el" href="shw__driver_8c-source.html#l01595">fsl_shw_deregister_user()</a>, <a class="el" href="shw__driver_8c-source.html#l01679">fsl_shw_get_results()</a>, <a class="el" href="shw__driver_8c-source.html#l00242">OS_DEV_INIT()</a>, <a class="el" href="shw__internals_8h-source.html#l00093">SHW_ADD_USER()</a>, <a class="el" href="shw__driver_8c-source.html#l00354">shw_cleanup()</a>, and <a class="el" href="shw__internals_8h-source.html#l00112">SHW_REMOVE_USER()</a>.</p>

</div>
</div><p>
<a class="anchor" name="a06eca2019a7da306a9eaa099fdbab66"></a><!-- doxytag: member="shw_driver.c::user_list" ref="a06eca2019a7da306a9eaa099fdbab66" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfsl__shw__uco__t.html">fsl_shw_uco_t</a>* <a class="el" href="shw__driver_8c.html#a06eca2019a7da306a9eaa099fdbab66">user_list</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Linked List of registered users of the API 
<p>Referenced by <a class="el" href="shw__internals_8h-source.html#l00093">SHW_ADD_USER()</a>, and <a class="el" href="shw__internals_8h-source.html#l00112">SHW_REMOVE_USER()</a>.</p>

</div>
</div><p>
</div>
<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<meta name="GENERATOR" content="Microsoft FrontPage 5.0">
<Title>footer</Title>
</HEAD>
<BODY>
</ul>
</ul>
</ul>
</ul>
<hr size="1">
<table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber1">
  <tr>
    <td width="50%"><small>&nbsp; Freescale Semiconductor, Inc., 2007.&nbsp; 
    All rights reserved.<br>
    </small><FONT COLOR="#FF0000"><small>Freescale Confidential Proprietary<br>
    </small></FONT><small><FONT COLOR="#FF0000">NDA Required</FONT></small></td>
    <td width="50%"><small>
<a href="http://www.doxygen.org/index.html">
<img src="Freescale25.png" alt="doxygen" align="right" border="0" width="129" height="48"></a></small></td>
  </tr>
</table>
<address style="align: right;">&nbsp;</address>
</body>
</html>
