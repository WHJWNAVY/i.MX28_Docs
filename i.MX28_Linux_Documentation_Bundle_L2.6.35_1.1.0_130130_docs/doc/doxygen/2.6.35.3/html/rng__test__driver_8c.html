<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>MXC Linux BSP: imx-test-2.6.35.3-1.1.0/module_test/rng_test_driver.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="contents">
<h1>imx-test-2.6.35.3-1.1.0/module_test/rng_test_driver.c File Reference</h1>This is a test driver for the RNG driver.  
<a href="#_details">More...</a>
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rng__test__driver_8c.html#133e8c150c9fafd12c2e0ec4de52a64b">OS_DEV_INIT</a> (rng_test_init)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rng__test__driver_8c.html#2ab90f23ebe24b12d58f1850276322f2">OS_DEV_OPEN</a> (rng_test_open)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rng__test__driver_8c.html#2ff78f7ec667e556f290a88a12bbaf04">OS_DEV_IOCTL</a> (rng_test_ioctl)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rng__test__driver_8c.html#085a0fe0c7b21e91ad4e38173c809f2a">OS_DEV_CLOSE</a> (rng_test_release)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="portable__os_8h.html#5bea54bf8ff6cfca0e16593c776a898d">os_error_code</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rng__test__driver_8c.html#1862dba6101e5ab09f8dcbbecbb7631c">rng_test_get_random</a> (<a class="el" href="structfsl__shw__uco__t.html">fsl_shw_uco_t</a> *user_ctx, unsigned long rng_data)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="portable__os_8h.html#5bea54bf8ff6cfca0e16593c776a898d">os_error_code</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rng__test__driver_8c.html#f39aeca9f7a7194ce194b7a34506f446">rng_test_add_entropy</a> (<a class="el" href="structfsl__shw__uco__t.html">fsl_shw_uco_t</a> *user_ctx, unsigned long rng_data)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="portable__os_8h.html#5bea54bf8ff6cfca0e16593c776a898d">os_error_code</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rng__test__driver_8c.html#049d65a56fea480acd299f97bc36f6a1">rng_test_read_register</a> (unsigned long rng_data)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="portable__os_8h.html#5bea54bf8ff6cfca0e16593c776a898d">os_error_code</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rng__test__driver_8c.html#2f2e75c6d95251dfc664ff65897fa150">rng_test_write_register</a> (unsigned long rng_data)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="portable__os_8h.html#5bea54bf8ff6cfca0e16593c776a898d">os_error_code</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rng__test__driver_8c.html#6c93a1ab2dc08c1f51310bd0c6eb96ad">rng_test_setup_user_driver_interaction</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rng__test__driver_8c.html#52fe463ed616a307bc13dc688f346da5">OS_DEV_SHUTDOWN</a> (rng_test_cleanup)</td></tr>

<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rng__test__driver_8c.html#3147faaac99460f46c4e06bb62352db7">rng_test_major_node</a> = RNG_TEST_MAJOR_NODE</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rng__test__driver_8c.html#6c78fc942e3354afca05a063fbbb0da8">rng_device_registered</a> = 0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="portable__os_8h.html#4099620f0c099a877846b3739098b600">os_driver_reg_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rng__test__driver_8c.html#d896d083f5b24e968590761df529d4b0">reg_handle</a></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
This is a test driver for the RNG driver. 
<p>
This driver and its associated reference test program are intended to demonstrate the use of and excercise the RNG block from kernel space.<p>
The test program also shows use of the RNG driver from user space. <hr><h2>Function Documentation</h2>
<a class="anchor" name="085a0fe0c7b21e91ad4e38173c809f2a"></a><!-- doxytag: member="rng_test_driver.c::OS_DEV_CLOSE" ref="085a0fe0c7b21e91ad4e38173c809f2a" args="(rng_test_release)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OS_DEV_CLOSE           </td>
          <td>(</td>
          <td class="paramtype">rng_test_release&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Driver interface function for close() system call.<p>
De-register from the FSL SHW API. Free associated memory. 
<p>References <a class="el" href="shw__driver_8c-source.html#l01595">fsl_shw_deregister_user()</a>, <a class="el" href="group__retfns.html#gbcb80e19db489f13e60421841cc84d19">os_dev_close_return()</a>, <a class="el" href="group__drsigargs.html#g935fef0cedacb4b0f68e7d056a504e17">os_dev_get_user_private()</a>, <a class="el" href="group__drsigargs.html#gb2b4ec0fef3278ae64679d3646bbd813">os_dev_set_user_private()</a>, <a class="el" href="portable__os_8h-source.html#l00242">OS_ERROR_OK_S</a>, and <a class="el" href="group__dkops.html#gcda51a54b44ce0788a295d92faa917de">os_free_memory()</a>.</p>

</div>
</div><p>
<a class="anchor" name="133e8c150c9fafd12c2e0ec4de52a64b"></a><!-- doxytag: member="rng_test_driver.c::OS_DEV_INIT" ref="133e8c150c9fafd12c2e0ec4de52a64b" args="(rng_test_init)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OS_DEV_INIT           </td>
          <td>(</td>
          <td class="paramtype">rng_test_init&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
****************************************************************************<p>
Function Implementations - Externally Accessible<p>
Initialize the driver.<p>
Bind this driver to the RNG device node.<p>
This is called during module load (insmod) or kernel init. 
<p>References <a class="el" href="group__retfns.html#gfadc5345f93845736be4d7f8bb239a05">os_dev_init_return()</a>, <a class="el" href="group__dkops.html#g0499729d4b98c8d8a53372c6d76ad5da">os_printk()</a>, and <a class="el" href="rng__test__driver_8c-source.html#l00411">rng_test_setup_user_driver_interaction()</a>.</p>

</div>
</div><p>
<a class="anchor" name="2ff78f7ec667e556f290a88a12bbaf04"></a><!-- doxytag: member="rng_test_driver.c::OS_DEV_IOCTL" ref="2ff78f7ec667e556f290a88a12bbaf04" args="(rng_test_ioctl)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OS_DEV_IOCTL           </td>
          <td>(</td>
          <td class="paramtype">rng_test_ioctl&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Driver interface function for ioctl() system call.<p>
This function serves as a control for the commands being passed by the application code. Depending on what command has been sent, a specific function will occur.<p>
This routine handles the following valid commands:<p>
<ul>
<li>RNG_GET_CONFIGURATION - Return driver, SMN, and SCM versions, memory sizes, block size.</li><li>RNG_READ_REG - Read register from RNG.</li><li>RNG_WRITE_REG - Write register to RNG.</li></ul>
<p>
<dl class="pre" compact><dt><b>Precondition:</b></dt><dd>Application code supplies a command with the related data (via the rng_data struct)</dd></dl>
<dl class="post" compact><dt><b>Postcondition:</b></dt><dd>A specific action is performed based on the requested command.</dd></dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>os_error_code </dd></dl>

<p>References <a class="el" href="group__drsigargs.html#gfec32683f0d47eee083e1c4a4f8d4637">os_dev_get_ioctl_arg()</a>, <a class="el" href="group__drsigargs.html#g5b09aea0d3144633cefac0f9b4e1b624">os_dev_get_ioctl_op()</a>, <a class="el" href="group__drsigargs.html#g935fef0cedacb4b0f68e7d056a504e17">os_dev_get_user_private()</a>, <a class="el" href="group__retfns.html#g485dbc024bbd21a60006c6411f4d159f">os_dev_ioctl_return()</a>, <a class="el" href="portable__os_8h-source.html#l00243">OS_ERROR_FAIL_S</a>, <a class="el" href="rng__test__driver_8c-source.html#l00271">rng_test_add_entropy()</a>, <a class="el" href="rng__test__driver_8c-source.html#l00220">rng_test_get_random()</a>, <a class="el" href="rng__test__driver_8c-source.html#l00323">rng_test_read_register()</a>, and <a class="el" href="rng__test__driver_8c-source.html#l00367">rng_test_write_register()</a>.</p>

</div>
</div><p>
<a class="anchor" name="2ab90f23ebe24b12d58f1850276322f2"></a><!-- doxytag: member="rng_test_driver.c::OS_DEV_OPEN" ref="2ab90f23ebe24b12d58f1850276322f2" args="(rng_test_open)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OS_DEV_OPEN           </td>
          <td>(</td>
          <td class="paramtype">rng_test_open&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Driver interface function for open() system call.<p>
Register the test user with the FSL SHW API. 
<p>References <a class="el" href="shw__driver_8h-source.html#l00157">FSL_RETURN_OK_S</a>, <a class="el" href="shw__driver_8c-source.html#l01562">fsl_shw_register_user()</a>, <a class="el" href="kernel_22_86_835_83_2linux_2drivers_2mxc_2security_2sahara2_2include_2sahara_8h-source.html#l01309">fsl_shw_uco_init</a>, <a class="el" href="group__dkops.html#gbb713c70ffb5c864c9470e6f1711d6a6">os_alloc_memory()</a>, <a class="el" href="group__retfns.html#g05cfbe8bbcf5a4e6b75ba6066019b89d">os_dev_open_return()</a>, <a class="el" href="group__drsigargs.html#gb2b4ec0fef3278ae64679d3646bbd813">os_dev_set_user_private()</a>, <a class="el" href="portable__os_8h-source.html#l00243">OS_ERROR_FAIL_S</a>, <a class="el" href="portable__os_8h-source.html#l00244">OS_ERROR_NO_MEMORY_S</a>, and <a class="el" href="portable__os_8h-source.html#l00242">OS_ERROR_OK_S</a>.</p>

</div>
</div><p>
<a class="anchor" name="52fe463ed616a307bc13dc688f346da5"></a><!-- doxytag: member="rng_test_driver.c::OS_DEV_SHUTDOWN" ref="52fe463ed616a307bc13dc688f346da5" args="(rng_test_cleanup)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OS_DEV_SHUTDOWN           </td>
          <td>(</td>
          <td class="paramtype">rng_test_cleanup&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Prepare driver for exit.<p>
This is called during <code>rmmod</code> when the driver is unloading. Try to undo whatever was done during rng_test_init(), to make the machine be in the same state, if possible.<p>
Mask off RNG interrupts. Put the RNG to sleep? 
<p>References <a class="el" href="group__retfns.html#gd55be53a69af69ba1c9b17b413fad0c6">os_dev_shutdown_return()</a>, <a class="el" href="group__dkops.html#g745130e9c17f4cf2bf12cd94bfc4dfd0">os_driver_remove_registration()</a>, <a class="el" href="portable__os_8h-source.html#l00242">OS_ERROR_OK_S</a>, <a class="el" href="group__dkops.html#g0499729d4b98c8d8a53372c6d76ad5da">os_printk()</a>, <a class="el" href="shw__driver_8c-source.html#l00148">reg_handle</a>, and <a class="el" href="rng__test__driver_8c-source.html#l00048">rng_device_registered</a>.</p>

</div>
</div><p>
<a class="anchor" name="f39aeca9f7a7194ce194b7a34506f446"></a><!-- doxytag: member="rng_test_driver.c::rng_test_add_entropy" ref="f39aeca9f7a7194ce194b7a34506f446" args="(fsl_shw_uco_t *user_ctx, unsigned long rng_data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="portable__os_8h.html#5bea54bf8ff6cfca0e16593c776a898d">os_error_code</a> rng_test_add_entropy           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsl__shw__uco__t.html">fsl_shw_uco_t</a> *&nbsp;</td>
          <td class="paramname"> <em>user_ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&nbsp;</td>
          <td class="paramname"> <em>rng_data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function will add <code>randomness</code> to the RNG.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>randomness</em>&nbsp;</td><td>Some 'good' entropy to add to the RNG.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>See rng_test_return_t. </dd></dl>

<p>References <a class="el" href="rng_2fsl__shw__rand_8c-source.html#l00112">fsl_shw_add_entropy()</a>, <a class="el" href="group__dkops.html#gbb713c70ffb5c864c9470e6f1711d6a6">os_alloc_memory()</a>, <a class="el" href="group__dkops.html#g15f39c7291cd7162f1afad7301e93dac">os_copy_from_user()</a>, <a class="el" href="group__dkops.html#g1dc2eba81acedb6ec16595589433e53f">os_copy_to_user()</a>, <a class="el" href="portable__os_8h-source.html#l00244">OS_ERROR_NO_MEMORY_S</a>, <a class="el" href="group__dkops.html#gcda51a54b44ce0788a295d92faa917de">os_free_memory()</a>, and <a class="el" href="group__dkops.html#g0499729d4b98c8d8a53372c6d76ad5da">os_printk()</a>.</p>

<p>Referenced by <a class="el" href="rng__test__driver_8c-source.html#l00144">OS_DEV_IOCTL()</a>.</p>

</div>
</div><p>
<a class="anchor" name="1862dba6101e5ab09f8dcbbecbb7631c"></a><!-- doxytag: member="rng_test_driver.c::rng_test_get_random" ref="1862dba6101e5ab09f8dcbbecbb7631c" args="(fsl_shw_uco_t *user_ctx, unsigned long rng_data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="portable__os_8h.html#5bea54bf8ff6cfca0e16593c776a898d">os_error_code</a> rng_test_get_random           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsl__shw__uco__t.html">fsl_shw_uco_t</a> *&nbsp;</td>
          <td class="paramname"> <em>user_ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&nbsp;</td>
          <td class="paramname"> <em>rng_data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function will retrieve entropy from the internal buffer of the RNG driver. If not enough entropy is available, it will SLEEP until more is available.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>See <a class="el" href="rng__driver_8h.html#cd95b94d8d1ac54a8270d27ad865fd57">rng_return_t</a>. </dd></dl>

<p>References <a class="el" href="rng_2fsl__shw__rand_8c-source.html#l00101">fsl_shw_get_random()</a>, <a class="el" href="group__dkops.html#gbb713c70ffb5c864c9470e6f1711d6a6">os_alloc_memory()</a>, <a class="el" href="group__dkops.html#g15f39c7291cd7162f1afad7301e93dac">os_copy_from_user()</a>, <a class="el" href="group__dkops.html#g1dc2eba81acedb6ec16595589433e53f">os_copy_to_user()</a>, <a class="el" href="portable__os_8h-source.html#l00245">OS_ERROR_BAD_ADDRESS_S</a>, <a class="el" href="group__dkops.html#gcda51a54b44ce0788a295d92faa917de">os_free_memory()</a>, <a class="el" href="group__dkops.html#g0499729d4b98c8d8a53372c6d76ad5da">os_printk()</a>, and <a class="el" href="rng__driver_8h-source.html#l00069">RNG_RET_OK</a>.</p>

<p>Referenced by <a class="el" href="rng__test__driver_8c-source.html#l00144">OS_DEV_IOCTL()</a>.</p>

</div>
</div><p>
<a class="anchor" name="049d65a56fea480acd299f97bc36f6a1"></a><!-- doxytag: member="rng_test_driver.c::rng_test_read_register" ref="049d65a56fea480acd299f97bc36f6a1" args="(unsigned long rng_data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="portable__os_8h.html#5bea54bf8ff6cfca0e16593c776a898d">os_error_code</a> rng_test_read_register           </td>
          <td>(</td>
          <td class="paramtype">unsigned long&nbsp;</td>
          <td class="paramname"> <em>rng_data</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read value from an RNG register. The offset will be checked for validity (range) as well as whether it is accessible at the time of the call.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>register_offset</em>&nbsp;</td><td>The (byte) offset within the RNG block of the register to be queried. See rngregs for meanings. </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>value</em>&nbsp;</td><td>Pointer to where value from the register should be placed.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>See <a class="el" href="rng__driver_8h.html#cd95b94d8d1ac54a8270d27ad865fd57">rng_return_t</a>. </dd></dl>

<p>References <a class="el" href="group__dkops.html#g15f39c7291cd7162f1afad7301e93dac">os_copy_from_user()</a>, <a class="el" href="group__dkops.html#g1dc2eba81acedb6ec16595589433e53f">os_copy_to_user()</a>, <a class="el" href="portable__os_8h-source.html#l00242">OS_ERROR_OK_S</a>, and <a class="el" href="group__dkops.html#g0499729d4b98c8d8a53372c6d76ad5da">os_printk()</a>.</p>

<p>Referenced by <a class="el" href="rng__test__driver_8c-source.html#l00144">OS_DEV_IOCTL()</a>.</p>

</div>
</div><p>
<a class="anchor" name="6c93a1ab2dc08c1f51310bd0c6eb96ad"></a><!-- doxytag: member="rng_test_driver.c::rng_test_setup_user_driver_interaction" ref="6c93a1ab2dc08c1f51310bd0c6eb96ad" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="portable__os_8h.html#5bea54bf8ff6cfca0e16593c776a898d">os_error_code</a> rng_test_setup_user_driver_interaction           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Register the driver as the driver for RNG_TEST_MAJOR_NODE<p>
If RNG_TEST_MAJOR_NODE is zero, then make sure that <a class="el" href="rng__test__driver_8c.html#3147faaac99460f46c4e06bb62352db7">rng_test_major_node</a> has the registered node value. 
<p>References <a class="el" href="group__drref.html#g93eb21458eac0f376af8d954a96d0061">OS_DEV_IOCTL_REF()</a>, <a class="el" href="group__dkops.html#g746d79bf01506b3b84556cd7fd733cfa">os_driver_add_registration()</a>, <a class="el" href="group__dkops.html#g08371d56a1c9a9d6b6dbcf8d5a080bb3">os_driver_complete_registration()</a>, <a class="el" href="group__dkops.html#gcdcbb1224bfc1d551a972ccef5052d4f">os_driver_get_major()</a>, <a class="el" href="group__dkops.html#gee0e81a853a702de227a8cdc5537470f">os_driver_init_registration()</a>, <a class="el" href="portable__os_8h-source.html#l00243">OS_ERROR_FAIL_S</a>, <a class="el" href="portable__os_8h-source.html#l00242">OS_ERROR_OK_S</a>, <a class="el" href="portable__os_8h-source.html#l00320">OS_FN_CLOSE</a>, <a class="el" href="portable__os_8h-source.html#l00323">OS_FN_IOCTL</a>, <a class="el" href="portable__os_8h-source.html#l00319">OS_FN_OPEN</a>, <a class="el" href="group__dkops.html#g0499729d4b98c8d8a53372c6d76ad5da">os_printk()</a>, <a class="el" href="shw__driver_8c-source.html#l00148">reg_handle</a>, <a class="el" href="rng__test__driver_8c-source.html#l00048">rng_device_registered</a>, and <a class="el" href="rng__test__driver_8c-source.html#l00042">rng_test_major_node</a>.</p>

<p>Referenced by <a class="el" href="rng__test__driver_8c-source.html#l00071">OS_DEV_INIT()</a>.</p>

</div>
</div><p>
<a class="anchor" name="2f2e75c6d95251dfc664ff65897fa150"></a><!-- doxytag: member="rng_test_driver.c::rng_test_write_register" ref="2f2e75c6d95251dfc664ff65897fa150" args="(unsigned long rng_data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="portable__os_8h.html#5bea54bf8ff6cfca0e16593c776a898d">os_error_code</a> rng_test_write_register           </td>
          <td>(</td>
          <td class="paramtype">unsigned long&nbsp;</td>
          <td class="paramname"> <em>rng_data</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Write a new value into an RNG register.<p>
The offset will be checked for validity (range) as well as whether it is accessible at the time of the call.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>register_offset</em>&nbsp;</td><td>The (byte) offset within the RNG block of the register to be modified. See rngregs for meanings. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>value</em>&nbsp;</td><td>The value to store into the register.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>See rng_test_return_t. </dd></dl>

<p>References <a class="el" href="group__dkops.html#g15f39c7291cd7162f1afad7301e93dac">os_copy_from_user()</a>, <a class="el" href="group__dkops.html#g1dc2eba81acedb6ec16595589433e53f">os_copy_to_user()</a>, <a class="el" href="portable__os_8h-source.html#l00242">OS_ERROR_OK_S</a>, and <a class="el" href="group__dkops.html#g0499729d4b98c8d8a53372c6d76ad5da">os_printk()</a>.</p>

<p>Referenced by <a class="el" href="rng__test__driver_8c-source.html#l00144">OS_DEV_IOCTL()</a>.</p>

</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="d896d083f5b24e968590761df529d4b0"></a><!-- doxytag: member="rng_test_driver.c::reg_handle" ref="d896d083f5b24e968590761df529d4b0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="portable__os_8h.html#4099620f0c099a877846b3739098b600">os_driver_reg_t</a> <a class="el" href="rng__test__driver_8c.html#d896d083f5b24e968590761df529d4b0">reg_handle</a><code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
OS-independent handle used for registering user interface of a driver. 
</div>
</div><p>
<a class="anchor" name="6c78fc942e3354afca05a063fbbb0da8"></a><!-- doxytag: member="rng_test_driver.c::rng_device_registered" ref="6c78fc942e3354afca05a063fbbb0da8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="rng__test__driver_8c.html#6c78fc942e3354afca05a063fbbb0da8">rng_device_registered</a> = 0<code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Flag to know whether register_chrdev() succeeded. Useful if the driver is ever to be unloaded. 0 is not registered, non-zero is registered. 
<p>Referenced by <a class="el" href="rng__test__driver_8c-source.html#l00455">OS_DEV_SHUTDOWN()</a>, and <a class="el" href="rng__test__driver_8c-source.html#l00411">rng_test_setup_user_driver_interaction()</a>.</p>

</div>
</div><p>
<a class="anchor" name="3147faaac99460f46c4e06bb62352db7"></a><!-- doxytag: member="rng_test_driver.c::rng_test_major_node" ref="3147faaac99460f46c4e06bb62352db7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="rng__test__driver_8c.html#3147faaac99460f46c4e06bb62352db7">rng_test_major_node</a> = RNG_TEST_MAJOR_NODE<code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
****************************************************************************<p>
Global / Static Variables<p>
Major node (user/device interaction value) for this driver. 
<p>Referenced by <a class="el" href="rng__test__driver_8c-source.html#l00411">rng_test_setup_user_driver_interaction()</a>.</p>

</div>
</div><p>
</div>
<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<meta name="GENERATOR" content="Microsoft FrontPage 5.0">
<Title>footer</Title>
</HEAD>
<BODY>
</ul>
</ul>
</ul>
</ul>
<hr size="1">
<table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber1">
  <tr>
    <td width="50%"><small>©&nbsp; Freescale Semiconductor, Inc., 2007.&nbsp; 
    All rights reserved.<br>
    </small><FONT COLOR="#FF0000"><small>Freescale Confidential Proprietary<br>
    </small></FONT><small><FONT COLOR="#FF0000">NDA Required</FONT></small></td>
    <td width="50%"><small>
<a href="http://www.doxygen.org/index.html">
<img src="Freescale25.png" alt="doxygen" align="right" border="0" width="129" height="48"></a></small></td>
  </tr>
</table>
<address style="align: right;">&nbsp;</address>
</body>
</html>
